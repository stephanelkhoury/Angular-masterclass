{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { catchError, map } from 'rxjs/operators';\nimport { environment } from '../../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./notification.service\";\nimport * as i3 from \"./mock-data.service\";\nclass ProductService {\n  constructor(http, notificationService, mockDataService) {\n    this.http = http;\n    this.notificationService = notificationService;\n    this.mockDataService = mockDataService;\n    this.apiUrl = `${environment.apiUrl}/products`;\n    this.categoriesUrl = `${environment.apiUrl}/categories`;\n    this.mockProducts = [{\n      id: '1',\n      name: 'Smartphone X',\n      description: 'Latest model smartphone with advanced features.',\n      price: 799.99,\n      imageUrl: 'https://via.placeholder.com/300x300.png?text=Smartphone+X',\n      category: {\n        id: 'electronics',\n        name: 'Electronics'\n      },\n      stockQuantity: 50,\n      rating: 4.5,\n      brand: 'TechCorp',\n      createdAt: new Date(),\n      featured: true\n    }, {\n      id: '2',\n      name: 'Laptop Pro',\n      description: 'High-performance laptop for professionals.',\n      price: 1299.00,\n      imageUrl: 'https://via.placeholder.com/300x300.png?text=Laptop+Pro',\n      category: {\n        id: 'electronics',\n        name: 'Electronics'\n      },\n      stockQuantity: 30,\n      rating: 4.8,\n      brand: 'CompSys',\n      createdAt: new Date()\n    }, {\n      id: '3',\n      name: 'Wireless Headphones',\n      description: 'Noise-cancelling wireless headphones.',\n      price: 199.50,\n      imageUrl: 'https://via.placeholder.com/300x300.png?text=Headphones',\n      category: {\n        id: 'electronics',\n        name: 'Electronics'\n      },\n      stockQuantity: 100,\n      rating: 4.3,\n      brand: 'AudioPhile',\n      createdAt: new Date()\n    }, {\n      id: '4',\n      name: 'Men\\'s Casual Shirt',\n      description: 'Comfortable cotton casual shirt.',\n      price: 45.00,\n      imageUrl: 'https://via.placeholder.com/300x300.png?text=Casual+Shirt',\n      category: {\n        id: 'fashion',\n        name: 'Fashion'\n      },\n      stockQuantity: 120,\n      rating: 4.0,\n      brand: 'ClothCo',\n      createdAt: new Date(),\n      regularPrice: 50.00\n    }, {\n      id: '5',\n      name: 'Running Shoes',\n      description: 'Lightweight running shoes for athletes.',\n      price: 89.99,\n      imageUrl: 'https://via.placeholder.com/300x300.png?text=Running+Shoes',\n      category: {\n        id: 'fashion',\n        name: 'Fashion'\n      },\n      stockQuantity: 75,\n      rating: 4.6,\n      brand: 'FitGear',\n      createdAt: new Date()\n    }, {\n      id: '6',\n      name: 'Coffee Maker',\n      description: 'Drip coffee maker with timer.',\n      price: 59.95,\n      imageUrl: 'https://via.placeholder.com/300x300.png?text=Coffee+Maker',\n      category: {\n        id: 'home-garden',\n        name: 'Home & Garden'\n      },\n      stockQuantity: 60,\n      rating: 4.2,\n      brand: 'HomeEase',\n      createdAt: new Date(),\n      keyFeatures: ['Programmable', 'Auto-shutoff']\n    }];\n  }\n  getProducts(options = {}) {\n    // Use mock data in development\n    if (environment.useMockData) {\n      return this.mockDataService.getProducts(options);\n    }\n    let params = new HttpParams();\n    if (options.page) params = params.set('page', options.page.toString());\n    if (options.limit) params = params.set('limit', options.limit.toString());\n    if (options.sortBy) params = params.set('sortBy', options.sortBy);\n    if (options.order) params = params.set('order', options.order);\n    if (options.category) params = params.set('category', options.category);\n    if (options.subcategory) params = params.set('subcategory', options.subcategory); // Handle subcategory\n    if (options.minPrice) params = params.set('minPrice', options.minPrice.toString());\n    if (options.maxPrice) params = params.set('maxPrice', options.maxPrice.toString());\n    if (options.search) params = params.set('search', options.search);\n    return this.http.get(this.apiUrl, {\n      params\n    }).pipe(catchError(this.handleError('Failed to load products')));\n  }\n  getProductById(id) {\n    // Use mock data in development\n    if (environment.useMockData) {\n      return this.mockDataService.getProductById(id);\n    }\n    return this.http.get(`${this.apiUrl}/${id}`).pipe(catchError(this.handleError('Failed to load product details')));\n  }\n  getCategories() {\n    // Use mock data in development\n    if (environment.useMockData) {\n      return this.mockDataService.getCategories();\n    }\n    return this.http.get(this.categoriesUrl).pipe(map(categories => this.buildCategoryTree(categories)), catchError(this.handleError('Failed to load categories')));\n  }\n  getProductReviews(productId, page = 1, limit = 10) {\n    // Use mock data in development\n    if (environment.useMockData) {\n      return this.mockDataService.getProductReviews(productId, page, limit);\n    }\n    const params = new HttpParams().set('page', page.toString()).set('limit', limit.toString());\n    return this.http.get(`${this.apiUrl}/${productId}/reviews`, {\n      params\n    }).pipe(catchError(this.handleError('Failed to load product reviews')));\n  }\n  addProductReview(productId, review) {\n    return this.http.post(`${this.apiUrl}/${productId}/reviews`, review).pipe(catchError(this.handleError('Failed to submit your review')));\n  }\n  getFeaturedProducts(limit = 8) {\n    // Use mock data in development\n    if (environment.useMockData) {\n      return this.mockDataService.getFeaturedProducts(limit);\n    }\n    const params = new HttpParams().set('limit', limit.toString()).set('featured', 'true');\n    return this.http.get(this.apiUrl, {\n      params\n    }).pipe(map(response => response.products), catchError(this.handleError('Failed to load featured products')));\n  }\n  getRelatedProducts(productId, limit = 4) {\n    const params = new HttpParams().set('limit', limit.toString());\n    return this.http.get(`${this.apiUrl}/${productId}/related`, {\n      params\n    }).pipe(catchError(this.handleError('Failed to load related products')));\n  }\n  buildCategoryTree(categories) {\n    // Create a map for faster lookup\n    const categoryMap = new Map();\n    categories.forEach(category => {\n      categoryMap.set(category.id, {\n        ...category,\n        children: []\n      });\n    });\n    // Identify top-level categories and build hierarchy\n    const rootCategories = [];\n    categoryMap.forEach(category => {\n      if (!category.parentId) {\n        rootCategories.push(category);\n      } else {\n        const parent = categoryMap.get(category.parentId);\n        if (parent) {\n          parent.children = parent.children || [];\n          parent.children.push(category);\n        }\n      }\n    });\n    return rootCategories;\n  }\n  handleError(message) {\n    return error => {\n      this.notificationService.error(message);\n      throw error;\n    };\n  }\n  // Store management methods\n  loadProducts() {\n    return this.getProducts().pipe(map(response => response.products));\n  }\n  loadCategories() {\n    return this.getCategories();\n  }\n  loadProductById(id) {\n    return this.getProductById(id);\n  }\n  static {\n    this.ɵfac = function ProductService_Factory(t) {\n      return new (t || ProductService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.NotificationService), i0.ɵɵinject(i3.MockDataService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: ProductService,\n      factory: ProductService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}\nexport { ProductService };","map":{"version":3,"names":["HttpParams","catchError","map","environment","ProductService","constructor","http","notificationService","mockDataService","apiUrl","categoriesUrl","mockProducts","id","name","description","price","imageUrl","category","stockQuantity","rating","brand","createdAt","Date","featured","regularPrice","keyFeatures","getProducts","options","useMockData","params","page","set","toString","limit","sortBy","order","subcategory","minPrice","maxPrice","search","get","pipe","handleError","getProductById","getCategories","categories","buildCategoryTree","getProductReviews","productId","addProductReview","review","post","getFeaturedProducts","response","products","getRelatedProducts","categoryMap","Map","forEach","children","rootCategories","parentId","push","parent","message","error","loadProducts","loadCategories","loadProductById","i0","ɵɵinject","i1","HttpClient","i2","NotificationService","i3","MockDataService","factory","ɵfac","providedIn"],"sources":["/Users/stephanelkhoury/Documents/GitHub/Angular-masterclass/Ecommerce-Project/code-examples/angular-ecommerce/src/app/core/services/product.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\n\nimport { environment } from '../../../environments/environment';\nimport { NotificationService } from './notification.service';\nimport { MockDataService } from './mock-data.service';\nimport { Product, Category, Review, PaginatedResponse } from '../models/product.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProductService {\n  private apiUrl = `${environment.apiUrl}/products`;\n  private categoriesUrl = `${environment.apiUrl}/categories`;\n  \n  private mockProducts: Product[] = [\n    { id: '1', name: 'Smartphone X', description: 'Latest model smartphone with advanced features.', price: 799.99, imageUrl: 'https://via.placeholder.com/300x300.png?text=Smartphone+X', category: { id: 'electronics', name: 'Electronics'}, stockQuantity: 50, rating: 4.5, brand: 'TechCorp', createdAt: new Date(), featured: true },\n    { id: '2', name: 'Laptop Pro', description: 'High-performance laptop for professionals.', price: 1299.00, imageUrl: 'https://via.placeholder.com/300x300.png?text=Laptop+Pro', category: { id: 'electronics', name: 'Electronics'}, stockQuantity: 30, rating: 4.8, brand: 'CompSys', createdAt: new Date() },\n    { id: '3', name: 'Wireless Headphones', description: 'Noise-cancelling wireless headphones.', price: 199.50, imageUrl: 'https://via.placeholder.com/300x300.png?text=Headphones', category: { id: 'electronics', name: 'Electronics'}, stockQuantity: 100, rating: 4.3, brand: 'AudioPhile', createdAt: new Date() },\n    { id: '4', name: 'Men\\'s Casual Shirt', description: 'Comfortable cotton casual shirt.', price: 45.00, imageUrl: 'https://via.placeholder.com/300x300.png?text=Casual+Shirt', category: { id: 'fashion', name: 'Fashion'}, stockQuantity: 120, rating: 4.0, brand: 'ClothCo', createdAt: new Date(), regularPrice: 50.00 },\n    { id: '5', name: 'Running Shoes', description: 'Lightweight running shoes for athletes.', price: 89.99, imageUrl: 'https://via.placeholder.com/300x300.png?text=Running+Shoes', category: { id: 'fashion', name: 'Fashion'}, stockQuantity: 75, rating: 4.6, brand: 'FitGear', createdAt: new Date() },\n    { id: '6', name: 'Coffee Maker', description: 'Drip coffee maker with timer.', price: 59.95, imageUrl: 'https://via.placeholder.com/300x300.png?text=Coffee+Maker', category: { id: 'home-garden', name: 'Home & Garden'}, stockQuantity: 60, rating: 4.2, brand: 'HomeEase', createdAt: new Date(), keyFeatures: ['Programmable', 'Auto-shutoff'] },\n  ];\n  \n  constructor(\n    private http: HttpClient,\n    private notificationService: NotificationService,\n    private mockDataService: MockDataService\n  ) {}\n\n  getProducts(options: {\n    page?: number;\n    limit?: number;\n    sortBy?: string;\n    order?: 'asc' | 'desc';\n    category?: string;\n    subcategory?: string; // Added subcategory\n    minPrice?: number;\n    maxPrice?: number;\n    search?: string;\n  } = {}): Observable<Product[]> {\n    \n    // Use mock data in development\n    if (environment.useMockData) {\n      return this.mockDataService.getProducts(options);\n    }\n    \n    let params = new HttpParams();\n    \n    if (options.page) params = params.set('page', options.page.toString());\n    if (options.limit) params = params.set('limit', options.limit.toString());\n    if (options.sortBy) params = params.set('sortBy', options.sortBy);\n    if (options.order) params = params.set('order', options.order);\n    if (options.category) params = params.set('category', options.category);\n    if (options.subcategory) params = params.set('subcategory', options.subcategory); // Handle subcategory\n    if (options.minPrice) params = params.set('minPrice', options.minPrice.toString());\n    if (options.maxPrice) params = params.set('maxPrice', options.maxPrice.toString());\n    if (options.search) params = params.set('search', options.search);\n    \n    return this.http.get<Product[]>(this.apiUrl, { params }).pipe(\n      catchError(this.handleError('Failed to load products'))\n    );\n  }\n\n  getProductById(id: string): Observable<Product> {\n    // Use mock data in development\n    if (environment.useMockData) {\n      return this.mockDataService.getProductById(id);\n    }\n    \n    return this.http.get<Product>(`${this.apiUrl}/${id}`).pipe(\n      catchError(this.handleError('Failed to load product details'))\n    );\n  }\n\n  getCategories(): Observable<Category[]> {\n    // Use mock data in development\n    if (environment.useMockData) {\n      return this.mockDataService.getCategories();\n    }\n    \n    return this.http.get<Category[]>(this.categoriesUrl).pipe(\n      map(categories => this.buildCategoryTree(categories)),\n      catchError(this.handleError('Failed to load categories'))\n    );\n  }\n\n  getProductReviews(productId: string, page = 1, limit = 10): Observable<{ reviews: Review[]; totalCount: number }> {\n    // Use mock data in development\n    if (environment.useMockData) {\n      return this.mockDataService.getProductReviews(productId, page, limit);\n    }\n    \n    const params = new HttpParams()\n      .set('page', page.toString())\n      .set('limit', limit.toString());\n    \n    return this.http.get<{ reviews: Review[]; totalCount: number }>(\n      `${this.apiUrl}/${productId}/reviews`,\n      { params }\n    ).pipe(\n      catchError(this.handleError('Failed to load product reviews'))\n    );\n  }\n\n  addProductReview(productId: string, review: { rating: number; title: string; comment: string }): Observable<Review> {\n    return this.http.post<Review>(\n      `${this.apiUrl}/${productId}/reviews`,\n      review\n    ).pipe(\n      catchError(this.handleError('Failed to submit your review'))\n    );\n  }\n\n  getFeaturedProducts(limit = 8): Observable<Product[]> {\n    // Use mock data in development\n    if (environment.useMockData) {\n      return this.mockDataService.getFeaturedProducts(limit);\n    }\n    \n    const params = new HttpParams().set('limit', limit.toString()).set('featured', 'true');\n    \n    return this.http.get<{ products: Product[] }>(this.apiUrl, { params }).pipe(\n      map(response => response.products),\n      catchError(this.handleError('Failed to load featured products'))\n    );\n  }\n\n  getRelatedProducts(productId: string, limit = 4): Observable<Product[]> {\n    const params = new HttpParams().set('limit', limit.toString());\n    \n    return this.http.get<Product[]>(`${this.apiUrl}/${productId}/related`, { params }).pipe(\n      catchError(this.handleError('Failed to load related products'))\n    );\n  }\n\n  private buildCategoryTree(categories: Category[]): Category[] {\n    // Create a map for faster lookup\n    const categoryMap = new Map<string, Category>();\n    categories.forEach(category => {\n      categoryMap.set(category.id, { ...category, children: [] });\n    });\n    \n    // Identify top-level categories and build hierarchy\n    const rootCategories: Category[] = [];\n    categoryMap.forEach(category => {\n      if (!category.parentId) {\n        rootCategories.push(category);\n      } else {\n        const parent = categoryMap.get(category.parentId);\n        if (parent) {\n          parent.children = parent.children || [];\n          parent.children.push(category);\n        }\n      }\n    });\n    \n    return rootCategories;\n  }\n\n  private handleError(message: string) {\n    return (error: any): Observable<never> => {\n      this.notificationService.error(message);\n      throw error;\n    };\n  }\n\n  // Store management methods\n  loadProducts(): Observable<Product[]> {\n    return this.getProducts().pipe(\n      map(response => response.products)\n    );\n  }\n\n  loadCategories(): Observable<Category[]> {\n    return this.getCategories();\n  }\n\n  loadProductById(id: string): Observable<Product> {\n    return this.getProductById(id);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}