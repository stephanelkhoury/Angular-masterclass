{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as CartActions from '../../../store/actions/cart.actions'; // Import CartActions\nimport { of } from 'rxjs'; // Import Observable and of for isInWishlist$\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"../../../core/services/wishlist.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/card\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"@angular/material/progress-spinner\";\nimport * as i10 from \"@angular/material/tooltip\";\nimport * as i11 from \"../star-rating/star-rating.component\";\nimport * as i12 from \"../../pipes/truncate.pipe\";\nfunction ProductCardComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 40);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" -\", ctx_r0.discountPercentage, \"% \");\n  }\n}\nfunction ProductCardComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtext(1, \"NEW\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductCardComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtext(1, \"FEATURED\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductCardComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵtext(1, \"BESTSELLER\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductCardComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44);\n    i0.ɵɵtext(1, \"SOLD OUT\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductCardComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 45)(1, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function ProductCardComponent_div_23_Template_button_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.prevImage($event));\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"chevron_left\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"button\", 47);\n    i0.ɵɵlistener(\"click\", function ProductCardComponent_div_23_Template_button_click_4_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r24.nextImage($event));\n    });\n    i0.ɵɵelementStart(5, \"mat-icon\");\n    i0.ɵɵtext(6, \"chevron_right\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ProductCardComponent_div_24_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\", 50);\n    i0.ɵɵlistener(\"click\", function ProductCardComponent_div_24_span_1_Template_span_click_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r29);\n      const i_r27 = restoredCtx.index;\n      const ctx_r28 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r28.setImage(i_r27, $event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r27 = ctx.index;\n    const ctx_r25 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", i_r27 === ctx_r25.currentImageIndex);\n  }\n}\nfunction ProductCardComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 48);\n    i0.ɵɵtemplate(1, ProductCardComponent_div_24_span_1_Template, 1, 2, \"span\", 49);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.product.images);\n  }\n}\nfunction ProductCardComponent_div_25_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 55);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r30 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Only \", ctx_r30.product.stockQuantity, \" left\");\n  }\n}\nfunction ProductCardComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 51)(1, \"div\", 52);\n    i0.ɵɵelement(2, \"div\", 53);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ProductCardComponent_div_25_span_3_Template, 2, 1, \"span\", 54);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", ((ctx_r7.product == null ? null : ctx_r7.product.stockQuantity) || 0) / 10 * 100, \"%\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.product == null ? null : ctx_r7.product.stockQuantity);\n  }\n}\nfunction ProductCardComponent_span_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r8.product.brand);\n  }\n}\nfunction ProductCardComponent_span_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 57);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r9.product == null ? null : ctx_r9.product.category == null ? null : ctx_r9.product.category.name);\n  }\n}\nfunction ProductCardComponent_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 58);\n    i0.ɵɵelement(1, \"app-star-rating\", 59);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"rating\", ctx_r10.product.rating || 0)(\"reviewCount\", (ctx_r10.product.reviews == null ? null : ctx_r10.product.reviews.length) || 0)(\"readOnly\", true);\n  }\n}\nfunction ProductCardComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 60)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"truncate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(3, 1, ctx_r11.product.description, 80));\n  }\n}\nfunction ProductCardComponent_span_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 61);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, ctx_r12.product.regularPrice, ctx_r12.currencySymbol), \" \");\n  }\n}\nfunction ProductCardComponent_span_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 62);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Save \", i0.ɵɵpipeBind2(2, 1, ctx_r13.discountAmount, ctx_r13.currencySymbol), \" \");\n  }\n}\nfunction ProductCardComponent_p_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 63);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind2(2, 2, ctx_r14.product.price / ctx_r14.product.unitQuantity, ctx_r14.currencySymbol), \"/\", ctx_r14.product.unit, \" \");\n  }\n}\nfunction ProductCardComponent_div_43_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 66)(1, \"mat-icon\", 67);\n    i0.ɵɵtext(2, \"check_circle_outline\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const feature_r32 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", feature_r32, \" \");\n  }\n}\nconst _c0 = function () {\n  return [];\n};\nfunction ProductCardComponent_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 64);\n    i0.ɵɵtemplate(1, ProductCardComponent_div_43_span_1_Template, 4, 1, \"span\", 65);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", (ctx_r15.product.keyFeatures == null ? null : ctx_r15.product.keyFeatures.slice(0, 2)) || i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nfunction ProductCardComponent_div_44_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 70)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"local_shipping\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Free Shipping \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductCardComponent_div_44_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 70)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"flash_on\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Fast Delivery \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductCardComponent_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 68);\n    i0.ɵɵtemplate(1, ProductCardComponent_div_44_div_1_Template, 4, 0, \"div\", 69);\n    i0.ɵɵtemplate(2, ProductCardComponent_div_44_div_2_Template, 4, 0, \"div\", 69);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r16.product == null ? null : ctx_r16.product.freeShipping);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r16.product == null ? null : ctx_r16.product.fastDelivery);\n  }\n}\nfunction ProductCardComponent_mat_icon_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\");\n    i0.ɵɵtext(1, \"add_shopping_cart\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductCardComponent_mat_progress_spinner_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-progress-spinner\", 71);\n  }\n}\nfunction ProductCardComponent_span_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Add to Cart\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductCardComponent_span_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Adding...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductCardComponent_div_52_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 72)(1, \"button\", 73);\n    i0.ɵɵlistener(\"click\", function ProductCardComponent_div_52_Template_button_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r35 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r35.decrementQuantity($event));\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"remove\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"input\", 74);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductCardComponent_div_52_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r37 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r37.selectedQuantity = $event);\n    })(\"change\", function ProductCardComponent_div_52_Template_input_change_4_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r38 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r38.onQuantityChange());\n    })(\"click\", function ProductCardComponent_div_52_Template_input_click_4_listener($event) {\n      return $event.stopPropagation();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 73);\n    i0.ɵɵlistener(\"click\", function ProductCardComponent_div_52_Template_button_click_5_listener($event) {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r40 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r40.incrementQuantity($event));\n    });\n    i0.ɵɵelementStart(6, \"mat-icon\");\n    i0.ɵɵtext(7, \"add\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r21.selectedQuantity === 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r21.selectedQuantity)(\"max\", (ctx_r21.product == null ? null : ctx_r21.product.stockQuantity) || 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r21.selectedQuantity >= ((ctx_r21.product == null ? null : ctx_r21.product.stockQuantity) || 1));\n  }\n}\nconst _c1 = function (a1) {\n  return [\"/products\", a1];\n};\nconst _c2 = function (a0) {\n  return {\n    \"show-quantity\": a0\n  };\n};\nlet ProductCardComponent = /*#__PURE__*/(() => {\n  class ProductCardComponent {\n    constructor(store,\n    // Inject Store\n    wishlistService,\n    // Inject WishlistService\n    cdr) {\n      this.store = store;\n      this.wishlistService = wishlistService;\n      this.cdr = cdr;\n      this.currencySymbol = '$';\n      this.newThresholdDays = 7; // Days to consider a product \"new\"\n      // Configuration for what to show\n      this.showNewBadge = true;\n      this.showFeaturedBadge = true;\n      this.showBestsellerBadge = true;\n      this.showSoldOutBadge = true;\n      this.showImageHoverControls = true;\n      this.showImageIndicators = true;\n      this.showStockIndicator = true;\n      this.showRating = true;\n      this.showShortDescription = false;\n      this.showKeyFeatures = false;\n      this.showShippingInfo = false;\n      this.cycleImagesOnHover = true;\n      // New Inputs for layout and specific button visibility\n      this.size = 'medium';\n      this.showBuyNowButton = true;\n      this.showQuantityControl = true; // For controlling the +/- quantity input\n      this.layout = 'vertical';\n      // Event Emitters - Renamed to avoid conflict with method names\n      this.productAddedToCart = new EventEmitter();\n      this.productAddedToWishlist = new EventEmitter();\n      this.productCompared = new EventEmitter();\n      this.productViewed = new EventEmitter(); // For quick view\n      this.productBoughtNow = new EventEmitter();\n      this.isNew = false;\n      this.isBestSeller = false;\n      this.isLowStock = false;\n      this.discountPercentage = null;\n      this.discountAmount = null;\n      this.currentImageIndex = 0;\n      this.addingToCart = false;\n      this.addingToWishlistState = false; // Renamed to avoid conflict\n      this.uiShowQuantitySelector = false; // Renamed to avoid conflict\n      this.selectedQuantity = 1;\n      this.isInWishlist$ = of(false); // Default to false\n      this.isInCompare$ = of(false); // Placeholder for compare feature\n    }\n\n    ngOnInit() {\n      this.updateProductFlags();\n      this.calculateDiscount();\n      if (this.product && this.product.id) {\n        // Ensure product and product.id exist\n        this.isInWishlist$ = this.wishlistService.isInWishlist(this.product.id);\n        // this.isInCompare$ = this.compareService.isInCompare(this.product.id); // If you have a compare service\n      }\n    }\n\n    ngOnChanges(changes) {\n      if (changes['product'] && this.product && this.product.id) {\n        // Ensure product and product.id exist\n        this.updateProductFlags();\n        this.calculateDiscount();\n        this.selectedQuantity = 1; // Reset quantity when product changes\n        this.uiShowQuantitySelector = false;\n        this.isInWishlist$ = this.wishlistService.isInWishlist(this.product.id);\n        // this.isInCompare$ = this.compareService.isInCompare(this.product.id);\n        this.cdr.markForCheck();\n      }\n    }\n    updateProductFlags() {\n      if (!this.product) return;\n      const now = new Date();\n      const productDate = this.product.createdAt ? new Date(this.product.createdAt) : now;\n      const diffTime = Math.abs(now.getTime() - productDate.getTime());\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n      this.isNew = diffDays <= (this.newThresholdDays || 7);\n      this.isBestSeller = !!this.product.featured || (this.product.rating || 0) >= 4.5 && (this.product.reviews?.length || 0) >= 50; // Adjusted review count\n      this.isLowStock = (this.product.stockQuantity || 0) > 0 && (this.product.stockQuantity || 0) <= 10;\n    }\n    calculateDiscount() {\n      if (!this.product) {\n        this.discountPercentage = null;\n        this.discountAmount = null;\n        return;\n      }\n      if (this.product.regularPrice && this.product.regularPrice > this.product.price) {\n        this.discountPercentage = Math.round((this.product.regularPrice - this.product.price) / this.product.regularPrice * 100);\n        this.discountAmount = this.product.regularPrice - this.product.price;\n      } else {\n        this.discountPercentage = null;\n        this.discountAmount = null;\n      }\n    }\n    // Mouse enter/leave handlers for image cycling\n    onMouseEnter() {\n      if (this.cycleImagesOnHover) {\n        this.startImageCycle();\n      }\n    }\n    onMouseLeave() {\n      if (this.cycleImagesOnHover) {\n        this.stopImageCycle();\n      }\n    }\n    startImageCycle() {\n      if (this.cycleImagesOnHover && this.product?.images && this.product.images.length > 1) {\n        this.stopImageCycle(); // Clear existing interval\n        this.imageChangeInterval = setInterval(() => {\n          if (this.product.images && this.product.images.length > 1) {\n            this.currentImageIndex = (this.currentImageIndex + 1) % this.product.images.length;\n            this.cdr.markForCheck(); // Trigger change detection\n          }\n        }, 2000); // Change image every 2 seconds\n      }\n    }\n\n    stopImageCycle() {\n      if (this.imageChangeInterval) {\n        clearInterval(this.imageChangeInterval);\n        this.imageChangeInterval = null;\n      }\n    }\n    // Image navigation\n    prevImage(event) {\n      event.stopPropagation();\n      if (this.product?.images && this.product.images.length > 0) {\n        this.currentImageIndex = (this.currentImageIndex - 1 + this.product.images.length) % this.product.images.length;\n      }\n    }\n    nextImage(event) {\n      event.stopPropagation();\n      if (this.product?.images && this.product.images.length > 0) {\n        this.currentImageIndex = (this.currentImageIndex + 1) % this.product.images.length;\n      }\n    }\n    setImage(index, event) {\n      event.stopPropagation();\n      this.currentImageIndex = index;\n    }\n    onImageError(event) {\n      const imgElement = event.target;\n      imgElement.src = 'assets/images/placeholder.png'; // Fallback image\n    }\n    // Action Methods\n    addToCartHandler(event) {\n      event.stopPropagation();\n      if (!this.product || (this.product.stockQuantity || 0) === 0 || this.addingToCart) return;\n      this.addingToCart = true;\n      const cartItem = {\n        productId: this.product.id,\n        quantity: this.selectedQuantity,\n        name: this.product.name,\n        price: this.product.discountPrice || this.product.price,\n        unitPrice: this.product.discountPrice || this.product.price,\n        image: this.product.imageUrl || this.product.images && this.product.images[0]?.url || ''\n      };\n      // Simulate API call\n      setTimeout(() => {\n        this.store.dispatch(CartActions.addToCart({\n          item: cartItem\n        }));\n        this.productAddedToCart.emit({\n          product: this.product,\n          quantity: this.selectedQuantity\n        });\n        this.addingToCart = false;\n        this.uiShowQuantitySelector = false; // Hide quantity selector after adding\n        this.selectedQuantity = 1; // Reset quantity\n        this.cdr.markForCheck();\n      }, 500);\n    }\n    addToWishlistHandler(event) {\n      event.stopPropagation();\n      if (!this.product || this.addingToWishlistState) return;\n      this.addingToWishlistState = true;\n      // Assuming WishlistService has a method like toggleWishlistItem or add/remove\n      // For now, let's assume toggleWishlist exists and works as intended.\n      // If toggleWishlist is not the correct method, this needs to be adjusted based on WishlistService's API.\n      this.wishlistService.toggleWishlist(this.product.id).subscribe(() => {\n        this.productAddedToWishlist.emit(this.product);\n        this.addingToWishlistState = false;\n        if (this.product && this.product.id) {\n          // Re-check after ensuring product.id exists\n          this.isInWishlist$ = this.wishlistService.isInWishlist(this.product.id);\n        }\n        this.cdr.markForCheck();\n      });\n    }\n    compareProductHandler(event) {\n      event.stopPropagation();\n      if (!this.product) return;\n      this.productCompared.emit(this.product);\n      // Add logic for compare service if available\n      // this.isInCompare$ = this.compareService.toggleCompare(this.product.id);\n      this.cdr.markForCheck();\n    }\n    viewProductHandler(event) {\n      event.stopPropagation();\n      if (!this.product) return;\n      this.productViewed.emit(this.product);\n      // Logic for opening a quick view modal, for example\n    }\n\n    buyNowHandler(event) {\n      event.stopPropagation();\n      if (!this.product || (this.product.stockQuantity || 0) === 0) return;\n      const cartItem = {\n        productId: this.product.id,\n        quantity: this.selectedQuantity,\n        name: this.product.name,\n        price: this.product.discountPrice || this.product.price,\n        unitPrice: this.product.discountPrice || this.product.price,\n        image: this.product.imageUrl || this.product.images && this.product.images[0]?.url || ''\n      };\n      this.store.dispatch(CartActions.addToCart({\n        item: cartItem\n      }));\n      this.productBoughtNow.emit({\n        product: this.product,\n        quantity: this.selectedQuantity\n      });\n      // Typically, you'd navigate to checkout here or dispatch another action\n      // If 'navigateToCheckout' is not a standard action, you might need to implement custom navigation\n      // or a specific NGRX effect that handles this. For now, commenting out if it causes issues.\n      // this.store.dispatch(CartActions.navigateToCheckout()); \n      console.log('Buy Now: Navigating to checkout (placeholder)');\n      this.cdr.markForCheck();\n    }\n    toggleQuantitySelectorHandler(event) {\n      event.stopPropagation();\n      if ((this.product?.stockQuantity || 0) === 0) return;\n      this.uiShowQuantitySelector = !this.uiShowQuantitySelector;\n    }\n    onQuantityChange() {\n      if (this.selectedQuantity < 1) {\n        this.selectedQuantity = 1;\n      }\n      if (this.product?.stockQuantity && this.selectedQuantity > this.product.stockQuantity) {\n        this.selectedQuantity = this.product.stockQuantity;\n      }\n    }\n    incrementQuantity(event) {\n      event.stopPropagation();\n      if (this.product?.stockQuantity && this.selectedQuantity < this.product.stockQuantity) {\n        this.selectedQuantity++;\n      }\n    }\n    decrementQuantity(event) {\n      event.stopPropagation();\n      if (this.selectedQuantity > 1) {\n        this.selectedQuantity--;\n      }\n    }\n    get currentDisplayImage() {\n      if (this.product?.images && this.product.images.length > 0 && this.product.images[this.currentImageIndex]?.url) {\n        return this.product.images[this.currentImageIndex].url;\n      }\n      return this.product?.imageUrl || 'assets/images/placeholder.png';\n    }\n    get stockStatusClass() {\n      if ((this.product?.stockQuantity || 0) === 0) return 'out-of-stock';\n      if ((this.product?.stockQuantity || 0) <= 10 && (this.product?.stockQuantity || 0) > 0) return 'low-stock'; // Fixed condition\n      return 'in-stock';\n    }\n    get cardClasses() {\n      const classes = ['product-card'];\n      if (this.product?.featured) {\n        classes.push('product-card--featured');\n      }\n      if (this.isNew) {\n        classes.push('product-card--new');\n      }\n      if (this.isBestSeller) {\n        classes.push('product-card--bestseller');\n      }\n      if ((this.product?.stockQuantity || 0) === 0) {\n        classes.push('product-card--out-of-stock');\n      }\n      return classes;\n    }\n    static {\n      this.ɵfac = function ProductCardComponent_Factory(t) {\n        return new (t || ProductCardComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.WishlistService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ProductCardComponent,\n        selectors: [[\"app-product-card\"]],\n        inputs: {\n          product: \"product\",\n          currencySymbol: \"currencySymbol\",\n          newThresholdDays: \"newThresholdDays\",\n          showNewBadge: \"showNewBadge\",\n          showFeaturedBadge: \"showFeaturedBadge\",\n          showBestsellerBadge: \"showBestsellerBadge\",\n          showSoldOutBadge: \"showSoldOutBadge\",\n          showImageHoverControls: \"showImageHoverControls\",\n          showImageIndicators: \"showImageIndicators\",\n          showStockIndicator: \"showStockIndicator\",\n          showRating: \"showRating\",\n          showShortDescription: \"showShortDescription\",\n          showKeyFeatures: \"showKeyFeatures\",\n          showShippingInfo: \"showShippingInfo\",\n          cycleImagesOnHover: \"cycleImagesOnHover\",\n          size: \"size\",\n          showBuyNowButton: \"showBuyNowButton\",\n          showQuantityControl: \"showQuantityControl\",\n          layout: \"layout\"\n        },\n        outputs: {\n          productAddedToCart: \"productAddedToCart\",\n          productAddedToWishlist: \"productAddedToWishlist\",\n          productCompared: \"productCompared\",\n          productViewed: \"productViewed\",\n          productBoughtNow: \"productBoughtNow\"\n        },\n        features: [i0.ɵɵNgOnChangesFeature],\n        decls: 55,\n        vars: 56,\n        consts: [[1, \"product-card-item\", 3, \"ngClass\", \"mouseenter\", \"mouseleave\"], [1, \"product-card-header\"], [1, \"product-image-link\", 3, \"routerLink\"], [\"mat-card-image\", \"\", \"loading\", \"lazy\", 1, \"product-image\", 3, \"src\", \"alt\", \"error\"], [1, \"badges-container\"], [\"class\", \"badge discount-badge\", 4, \"ngIf\"], [\"class\", \"badge new-badge\", 4, \"ngIf\"], [\"class\", \"badge featured-badge\", 4, \"ngIf\"], [\"class\", \"badge bestseller-badge\", 4, \"ngIf\"], [\"class\", \"badge sold-out-badge\", 4, \"ngIf\"], [1, \"quick-actions\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Add to Wishlist\", \"aria-label\", \"Add to wishlist\", 1, \"action-btn\", 3, \"disabled\", \"click\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Quick View\", \"aria-label\", \"Quick view product\", 1, \"action-btn\", 3, \"click\"], [\"mat-icon-button\", \"\", \"aria-label\", \"Compare product\", 1, \"action-btn\", 3, \"matTooltip\", \"click\"], [\"class\", \"image-hover-controls\", 4, \"ngIf\"], [\"class\", \"image-indicators\", 4, \"ngIf\"], [\"class\", \"stock-indicator\", 4, \"ngIf\"], [1, \"product-card-content\"], [1, \"product-meta\"], [\"class\", \"product-brand\", 4, \"ngIf\"], [\"class\", \"product-category\", 4, \"ngIf\"], [1, \"product-name-link\", 3, \"routerLink\"], [1, \"product-name\", 3, \"matTooltip\"], [\"class\", \"product-rating\", 4, \"ngIf\"], [\"class\", \"product-description\", 4, \"ngIf\"], [1, \"product-price-container\"], [1, \"product-price\"], [1, \"current-price\"], [\"class\", \"regular-price\", 4, \"ngIf\"], [\"class\", \"discount-amount savings\", 4, \"ngIf\"], [\"class\", \"price-per-unit\", 4, \"ngIf\"], [\"class\", \"product-features\", 4, \"ngIf\"], [\"class\", \"shipping-info\", 4, \"ngIf\"], [1, \"product-card-actions\", 3, \"ngClass\"], [1, \"main-actions\"], [\"mat-flat-button\", \"\", \"color\", \"primary\", 1, \"add-to-cart-btn\", 3, \"disabled\", \"click\"], [4, \"ngIf\"], [\"mode\", \"indeterminate\", \"diameter\", \"20\", 4, \"ngIf\"], [\"class\", \"quantity-controls\", 4, \"ngIf\"], [\"mat-stroked-button\", \"\", 1, \"buy-now-btn\", 3, \"disabled\", \"click\"], [1, \"badge\", \"discount-badge\"], [1, \"badge\", \"new-badge\"], [1, \"badge\", \"featured-badge\"], [1, \"badge\", \"bestseller-badge\"], [1, \"badge\", \"sold-out-badge\"], [1, \"image-hover-controls\"], [\"mat-icon-button\", \"\", \"aria-label\", \"Previous image\", 1, \"hover-control\", \"prev\", 3, \"click\"], [\"mat-icon-button\", \"\", \"aria-label\", \"Next image\", 1, \"hover-control\", \"next\", 3, \"click\"], [1, \"image-indicators\"], [\"class\", \"indicator-dot\", 3, \"active\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"indicator-dot\", 3, \"click\"], [1, \"stock-indicator\"], [1, \"stock-bar\"], [1, \"stock-fill\"], [\"class\", \"stock-text\", 4, \"ngIf\"], [1, \"stock-text\"], [1, \"product-brand\"], [1, \"product-category\"], [1, \"product-rating\"], [3, \"rating\", \"reviewCount\", \"readOnly\"], [1, \"product-description\"], [1, \"regular-price\"], [1, \"discount-amount\", \"savings\"], [1, \"price-per-unit\"], [1, \"product-features\"], [\"class\", \"feature\", 4, \"ngFor\", \"ngForOf\"], [1, \"feature\"], [1, \"feature-icon\"], [1, \"shipping-info\"], [\"class\", \"shipping-item\", 4, \"ngIf\"], [1, \"shipping-item\"], [\"mode\", \"indeterminate\", \"diameter\", \"20\"], [1, \"quantity-controls\"], [\"mat-icon-button\", \"\", 3, \"disabled\", \"click\"], [\"type\", \"number\", \"min\", \"1\", 1, \"quantity-input\", 3, \"ngModel\", \"max\", \"ngModelChange\", \"change\", \"click\"]],\n        template: function ProductCardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"mat-card\", 0);\n            i0.ɵɵlistener(\"mouseenter\", function ProductCardComponent_Template_mat_card_mouseenter_0_listener() {\n              return ctx.onMouseEnter();\n            })(\"mouseleave\", function ProductCardComponent_Template_mat_card_mouseleave_0_listener() {\n              return ctx.onMouseLeave();\n            });\n            i0.ɵɵelementStart(1, \"div\", 1)(2, \"a\", 2)(3, \"img\", 3);\n            i0.ɵɵlistener(\"error\", function ProductCardComponent_Template_img_error_3_listener($event) {\n              return ctx.onImageError($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(4, \"div\", 4);\n            i0.ɵɵtemplate(5, ProductCardComponent_div_5_Template, 2, 1, \"div\", 5);\n            i0.ɵɵtemplate(6, ProductCardComponent_div_6_Template, 2, 0, \"div\", 6);\n            i0.ɵɵtemplate(7, ProductCardComponent_div_7_Template, 2, 0, \"div\", 7);\n            i0.ɵɵtemplate(8, ProductCardComponent_div_8_Template, 2, 0, \"div\", 8);\n            i0.ɵɵtemplate(9, ProductCardComponent_div_9_Template, 2, 0, \"div\", 9);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"div\", 10)(11, \"button\", 11);\n            i0.ɵɵlistener(\"click\", function ProductCardComponent_Template_button_click_11_listener($event) {\n              return ctx.addToWishlistHandler($event);\n            });\n            i0.ɵɵelementStart(12, \"mat-icon\");\n            i0.ɵɵtext(13);\n            i0.ɵɵpipe(14, \"async\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(15, \"button\", 12);\n            i0.ɵɵlistener(\"click\", function ProductCardComponent_Template_button_click_15_listener($event) {\n              return ctx.viewProductHandler($event);\n            });\n            i0.ɵɵelementStart(16, \"mat-icon\");\n            i0.ɵɵtext(17, \"visibility\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(18, \"button\", 13);\n            i0.ɵɵlistener(\"click\", function ProductCardComponent_Template_button_click_18_listener($event) {\n              return ctx.compareProductHandler($event);\n            });\n            i0.ɵɵpipe(19, \"async\");\n            i0.ɵɵelementStart(20, \"mat-icon\");\n            i0.ɵɵtext(21);\n            i0.ɵɵpipe(22, \"async\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(23, ProductCardComponent_div_23_Template, 7, 0, \"div\", 14);\n            i0.ɵɵtemplate(24, ProductCardComponent_div_24_Template, 2, 1, \"div\", 15);\n            i0.ɵɵtemplate(25, ProductCardComponent_div_25_Template, 4, 3, \"div\", 16);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(26, \"mat-card-content\", 17)(27, \"div\", 18);\n            i0.ɵɵtemplate(28, ProductCardComponent_span_28_Template, 2, 1, \"span\", 19);\n            i0.ɵɵtemplate(29, ProductCardComponent_span_29_Template, 2, 1, \"span\", 20);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"a\", 21)(31, \"h3\", 22);\n            i0.ɵɵtext(32);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(33, ProductCardComponent_div_33_Template, 2, 3, \"div\", 23);\n            i0.ɵɵtemplate(34, ProductCardComponent_div_34_Template, 4, 4, \"div\", 24);\n            i0.ɵɵelementStart(35, \"div\", 25)(36, \"p\", 26)(37, \"span\", 27);\n            i0.ɵɵtext(38);\n            i0.ɵɵpipe(39, \"currency\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(40, ProductCardComponent_span_40_Template, 3, 4, \"span\", 28);\n            i0.ɵɵtemplate(41, ProductCardComponent_span_41_Template, 3, 4, \"span\", 29);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(42, ProductCardComponent_p_42_Template, 3, 5, \"p\", 30);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(43, ProductCardComponent_div_43_Template, 2, 2, \"div\", 31);\n            i0.ɵɵtemplate(44, ProductCardComponent_div_44_Template, 3, 2, \"div\", 32);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(45, \"mat-card-actions\", 33)(46, \"div\", 34)(47, \"button\", 35);\n            i0.ɵɵlistener(\"click\", function ProductCardComponent_Template_button_click_47_listener($event) {\n              return ctx.addToCartHandler($event);\n            });\n            i0.ɵɵtemplate(48, ProductCardComponent_mat_icon_48_Template, 2, 0, \"mat-icon\", 36);\n            i0.ɵɵtemplate(49, ProductCardComponent_mat_progress_spinner_49_Template, 1, 0, \"mat-progress-spinner\", 37);\n            i0.ɵɵtemplate(50, ProductCardComponent_span_50_Template, 2, 0, \"span\", 36);\n            i0.ɵɵtemplate(51, ProductCardComponent_span_51_Template, 2, 0, \"span\", 36);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(52, ProductCardComponent_div_52_Template, 8, 4, \"div\", 38);\n            i0.ɵɵelementStart(53, \"button\", 39);\n            i0.ɵɵlistener(\"click\", function ProductCardComponent_Template_button_click_53_listener($event) {\n              return ctx.buyNowHandler($event);\n            });\n            i0.ɵɵtext(54, \" Buy Now \");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵclassProp(\"out-of-stock\", ((ctx.product == null ? null : ctx.product.stockQuantity) || 0) === 0)(\"featured\", ctx.product == null ? null : ctx.product.featured);\n            i0.ɵɵproperty(\"ngClass\", ctx.cardClasses);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(50, _c1, ctx.product.id));\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"src\", ctx.currentDisplayImage, i0.ɵɵsanitizeUrl)(\"alt\", ctx.product.name);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.discountPercentage !== null && ctx.discountPercentage > 0);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.isNew && ctx.showNewBadge);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", (ctx.product == null ? null : ctx.product.featured) && ctx.showFeaturedBadge);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.isBestSeller && ctx.showBestsellerBadge);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ((ctx.product == null ? null : ctx.product.stockQuantity) || 0) === 0 && ctx.showSoldOutBadge);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.addingToWishlistState);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(14, 41, ctx.isInWishlist$) ? \"favorite\" : \"favorite_border\");\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"matTooltip\", i0.ɵɵpipeBind1(19, 43, ctx.isInCompare$) ? \"Remove from compare\" : \"Add to compare\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(22, 45, ctx.isInCompare$) ? \"check_circle\" : \"compare_arrows\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", (ctx.product == null ? null : ctx.product.images) && ((ctx.product.images == null ? null : ctx.product.images.length) || 0) > 1 && ctx.showImageHoverControls);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", (ctx.product == null ? null : ctx.product.images) && ((ctx.product.images == null ? null : ctx.product.images.length) || 0) > 1 && ctx.showImageIndicators);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.showStockIndicator && (ctx.product == null ? null : ctx.product.stockQuantity) !== undefined && ((ctx.product == null ? null : ctx.product.stockQuantity) || 0) > 0 && ((ctx.product == null ? null : ctx.product.stockQuantity) || 0) <= 10);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.product == null ? null : ctx.product.brand);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.product == null ? null : ctx.product.category == null ? null : ctx.product.category.name);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(52, _c1, ctx.product.id));\n            i0.ɵɵadvance(1);\n            i0.ɵɵpropertyInterpolate(\"matTooltip\", ctx.product.name);\n            i0.ɵɵadvance(1);\n            i0.ɵɵtextInterpolate(ctx.product.name);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.showRating && (ctx.product == null ? null : ctx.product.rating) !== undefined && ((ctx.product == null ? null : ctx.product.rating) || 0) > 0);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.showShortDescription);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(39, 47, (ctx.product == null ? null : ctx.product.discountPrice) || (ctx.product == null ? null : ctx.product.price) || 0, ctx.currencySymbol));\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", (ctx.product == null ? null : ctx.product.regularPrice) && (ctx.product == null ? null : ctx.product.price) && ((ctx.product == null ? null : ctx.product.regularPrice) || 0) > ((ctx.product == null ? null : ctx.product.price) || 0));\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.discountAmount !== null && ctx.discountAmount > 0);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", (ctx.product == null ? null : ctx.product.unit) && (ctx.product == null ? null : ctx.product.unitQuantity) && (ctx.product == null ? null : ctx.product.price));\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.showKeyFeatures && (ctx.product == null ? null : ctx.product.keyFeatures) && ((ctx.product.keyFeatures == null ? null : ctx.product.keyFeatures.length) || 0) > 0);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.showShippingInfo);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(54, _c2, ctx.uiShowQuantitySelector));\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ((ctx.product == null ? null : ctx.product.stockQuantity) || 0) === 0 || ctx.addingToCart);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.addingToCart);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.addingToCart);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.addingToCart);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.addingToCart);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.uiShowQuantitySelector && ((ctx.product == null ? null : ctx.product.stockQuantity) || 0) > 0);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"disabled\", ((ctx.product == null ? null : ctx.product.stockQuantity) || 0) === 0);\n          }\n        },\n        dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i4.RouterLink, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.NgControlStatus, i5.MinValidator, i5.MaxValidator, i5.NgModel, i6.MatButton, i6.MatIconButton, i7.MatCard, i7.MatCardActions, i7.MatCardContent, i7.MatCardImage, i8.MatIcon, i9.MatProgressSpinner, i10.MatTooltip, i11.StarRatingComponent, i3.AsyncPipe, i3.CurrencyPipe, i12.TruncatePipe],\n        styles: [\"[_nghost-%COMP%]{--card-transition: all .4s cubic-bezier(.25, .46, .45, .94);--card-hover-scale: 1.02;--card-image-hover-scale: 1.08;--card-border-hover-color: rgba(37, 99, 235, .3);--card-box-shadow: 0 4px 6px rgba(0, 0, 0, .05), 0 1px 3px rgba(0, 0, 0, .1);--card-box-shadow-hover: 0 20px 25px -5px rgba(0, 0, 0, .1), 0 10px 10px -5px rgba(0, 0, 0, .04), 0 0 0 2px var(--card-border-hover-color);--card-gradient-overlay: linear-gradient( to top, rgba(0, 0, 0, .7) 0%, rgba(0, 0, 0, .3) 40%, transparent 100% );--primary: #2563eb;--primary-light: #3b82f6;--primary-dark: #1d4ed8;--success: #10b981;--warning: #f59e0b;--error: #ef4444;--gray-50: #f9fafb;--gray-100: #f3f4f6;--gray-200: #e5e7eb;--gray-300: #d1d5db;--gray-400: #9ca3af;--gray-500: #6b7280;--gray-600: #4b5563;--gray-700: #374151;--gray-800: #1f2937;--gray-900: #111827;display:block;width:100%;height:100%}.product-card[_ngcontent-%COMP%]{position:relative;height:100%;display:flex;flex-direction:column;background:#fff;border-radius:18px;box-shadow:0 2px 16px #2563eb12;border:1px solid #e5e7eb;transition:box-shadow .2s,transform .2s;will-change:transform,box-shadow;isolation:isolate}.product-card[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;inset:0;border-radius:16px;background:radial-gradient(circle at 50% 50%,rgba(37,99,235,.1),transparent 70%);opacity:0;transition:opacity .3s ease;pointer-events:none;z-index:-1}.product-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 32px #2563eb21;transform:translateY(-4px) scale(1.02);border-color:#2563eb33}.product-card[_ngcontent-%COMP%]:hover:before{opacity:1}.product-card[_ngcontent-%COMP%]:hover   .product-image[_ngcontent-%COMP%]{transform:scale(var(--card-image-hover-scale))}.product-card[_ngcontent-%COMP%]:hover   .quick-actions[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.product-card[_ngcontent-%COMP%]:hover   .product-badges[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{transform:scale(1.05)}.product-card.featured[_ngcontent-%COMP%]{border:2px solid var(--primary);background:linear-gradient(135deg,rgba(37,99,235,.02) 0%,transparent 100%)}.product-card.featured[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;top:0;right:0;width:0;height:0;border-left:30px solid transparent;border-top:30px solid var(--primary);z-index:2}.product-card.out-of-stock[_ngcontent-%COMP%]{opacity:.7}.product-card.out-of-stock[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]:after{content:\\\"OUT OF STOCK\\\";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) rotate(-15deg);background:rgba(239,68,68,.9);color:#fff;padding:8px 16px;border-radius:8px;font-weight:600;font-size:14px;letter-spacing:1px;z-index:3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.product-card.new-arrival[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;inset:-10px;background:conic-gradient(from 45deg,var(--primary),var(--success),var(--primary));border-radius:20px;z-index:-1;animation:_ngcontent-%COMP%_rotate 3s linear infinite}.product-card.best-seller[_ngcontent-%COMP%]{box-shadow:var(--card-box-shadow),0 0 0 2px #ffd7004d}.product-badges[_ngcontent-%COMP%]{position:absolute;top:12px;left:12px;z-index:10;display:flex;flex-direction:column;gap:6px;max-width:calc(100% - 80px)}.product-badges[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:6px 10px;border-radius:20px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;transition:transform .2s ease;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);box-shadow:0 2px 8px #00000026}.product-badges[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.product-badges[_ngcontent-%COMP%]   .badge.discount-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.product-badges[_ngcontent-%COMP%]   .badge.new-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.product-badges[_ngcontent-%COMP%]   .badge.bestseller-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff}.product-badges[_ngcontent-%COMP%]   .badge.featured-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#1d4ed8);color:#fff}.product-badges[_ngcontent-%COMP%]   .badge.sold-out-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff}.product-badges[_ngcontent-%COMP%]   .badge.low-stock-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f97316,#ea580c);color:#fff}.quick-actions[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;z-index:10;display:flex;flex-direction:column;gap:8px;opacity:0;transform:translate(20px);transition:all .3s cubic-bezier(.25,.46,.45,.94)}.quick-actions[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]{width:40px;height:40px;background:rgba(255,255,255,.95);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);box-shadow:0 4px 12px #00000026;transition:all .2s ease}.quick-actions[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--gray-600);transition:color .2s ease}.quick-actions[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:white;box-shadow:0 6px 20px #0003}.quick-actions[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:var(--primary)}.quick-actions[_ngcontent-%COMP%]   .quick-action-btn.active[_ngcontent-%COMP%]{background:var(--primary)}.quick-actions[_ngcontent-%COMP%]   .quick-action-btn.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.quick-actions[_ngcontent-%COMP%]   .quick-action-btn.active[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.quick-actions[_ngcontent-%COMP%]   .quick-action-btn.wishlist-btn.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ef4444}.quick-actions[_ngcontent-%COMP%]   .quick-action-btn.wishlist-btn.active[_ngcontent-%COMP%]{background:rgba(239,68,68,.1);border-color:#ef444433}.product-image-container[_ngcontent-%COMP%]{position:relative;width:100%;height:240px;overflow:hidden;cursor:pointer;border-radius:14px;background:#f1f5f9}.product-image-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:var(--card-gradient-overlay);opacity:0;transition:opacity .3s ease;z-index:1}.product-image-container[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:14px;object-fit:cover;transition:transform .4s cubic-bezier(.25,.46,.45,.94);will-change:transform;background:#f1f5f9}.product-image-container[_ngcontent-%COMP%]   .image-indicators[_ngcontent-%COMP%]{position:absolute;bottom:12px;left:50%;transform:translate(-50%);display:flex;gap:6px;z-index:2}.product-image-container[_ngcontent-%COMP%]   .image-indicators[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,.5);cursor:pointer;transition:all .2s ease}.product-image-container[_ngcontent-%COMP%]   .image-indicators[_ngcontent-%COMP%]   .indicator.active[_ngcontent-%COMP%]{background:white;transform:scale(1.2)}.product-image-container[_ngcontent-%COMP%]   .image-indicators[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.8)}.product-image-container[_ngcontent-%COMP%]   .stock-indicator[_ngcontent-%COMP%]{position:absolute;bottom:12px;left:12px;right:12px;background:rgba(0,0,0,.8);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-radius:8px;padding:8px;color:#fff;font-size:12px;z-index:2}.product-image-container[_ngcontent-%COMP%]   .stock-indicator[_ngcontent-%COMP%]   .stock-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:rgba(255,255,255,.2);border-radius:2px;margin-bottom:4px;overflow:hidden}.product-image-container[_ngcontent-%COMP%]   .stock-indicator[_ngcontent-%COMP%]   .stock-bar[_ngcontent-%COMP%]   .stock-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ef4444,#f97316,#10b981);border-radius:2px;transition:width .3s ease}.product-image-container[_ngcontent-%COMP%]   .stock-indicator[_ngcontent-%COMP%]   .stock-text[_ngcontent-%COMP%]{font-weight:500}.product-image-container[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.product-content[_ngcontent-%COMP%]{padding:18px;flex:1;display:flex;flex-direction:column;gap:10px}.product-content[_ngcontent-%COMP%]   .product-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.product-content[_ngcontent-%COMP%]   .product-meta[_ngcontent-%COMP%]   .product-category[_ngcontent-%COMP%]{font-size:.9rem;color:#2563eb;text-transform:uppercase;font-weight:600;letter-spacing:.5px}.product-content[_ngcontent-%COMP%]   .product-meta[_ngcontent-%COMP%]   .product-brand[_ngcontent-%COMP%]{font-size:.85rem;color:#64748b;font-weight:500}.product-content[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#1e293b;margin:0;cursor:pointer;transition:color .2s ease;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.product-content[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]:hover{color:#2563eb}.product-content[_ngcontent-%COMP%]   .product-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.product-content[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]   .current-price[_ngcontent-%COMP%]{color:#2563eb;font-size:1.2rem;font-weight:700}.product-content[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]   .regular-price[_ngcontent-%COMP%]{color:#64748b;font-size:1rem;text-decoration:line-through}.product-content[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]   .savings[_ngcontent-%COMP%]{color:#10b981;font-size:.95rem}.product-content[_ngcontent-%COMP%]   .product-features[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.product-content[_ngcontent-%COMP%]   .product-features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.95rem;color:#475569}.product-content[_ngcontent-%COMP%]   .product-features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{color:#10b981}.product-content[_ngcontent-%COMP%]   .shipping-info[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.product-content[_ngcontent-%COMP%]   .shipping-info[_ngcontent-%COMP%]   .shipping-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.9rem;color:#10b981;font-weight:500}.product-content[_ngcontent-%COMP%]   .shipping-info[_ngcontent-%COMP%]   .shipping-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px}.product-actions[_ngcontent-%COMP%]{padding:16px 20px 20px;border-top:1px solid var(--gray-100);display:flex;flex-direction:column;gap:12px}.product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]{width:100%;height:44px;background:linear-gradient(90deg,#2563eb 60%,#3b82f6 100%);color:#fff;border-radius:10px;font-weight:600;font-size:1rem;display:flex;align-items:center;justify-content:center;gap:8px;cursor:pointer;transition:all .2s ease;position:relative;overflow:hidden}.product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease}.product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]:hover{background:#1d4ed8;box-shadow:0 4px 16px #2563eb33}.product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]:hover:before{left:100%}.product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]:disabled{background:#e5e7eb;color:#64748b}.product-actions[_ngcontent-%COMP%]   .add-to-cart-btn.loading[_ngcontent-%COMP%]{pointer-events:none}.product-actions[_ngcontent-%COMP%]   .add-to-cart-btn.loading[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]     circle{stroke:#fff}.product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px}.product-actions[_ngcontent-%COMP%]   .quantity-controls[_ngcontent-%COMP%]{display:flex;justify-content:center}.product-actions[_ngcontent-%COMP%]   .buy-now-btn[_ngcontent-%COMP%]{width:100%;height:40px;background:transparent;border-radius:10px;border:2px solid #2563eb;color:#2563eb;font-weight:600;font-size:1rem;display:flex;align-items:center;justify-content:center;gap:8px;cursor:pointer;transition:all .2s ease}.product-actions[_ngcontent-%COMP%]   .buy-now-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.product-actions[_ngcontent-%COMP%]   .buy-now-btn[_ngcontent-%COMP%]:disabled{border-color:#e5e7eb;color:#64748b}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(255,255,255,.9);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:20;border-radius:16px}.loading-overlay[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]     circle{stroke:var(--primary)}@media (max-width: 900px){.product-card[_ngcontent-%COMP%]{border-radius:12px}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.01)}.product-image-container[_ngcontent-%COMP%]{height:180px}.quick-actions[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.quick-actions[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]{width:36px;height:36px}.product-content[_ngcontent-%COMP%]{padding:12px;gap:8px}.product-content[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:1rem}.product-content[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]   .current-price[_ngcontent-%COMP%]{font-size:1.1rem}.product-actions[_ngcontent-%COMP%]{padding:8px 12px 12px}.product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]{height:36px;font-size:.95rem}}.product-card--small[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{height:180px}.product-card--small[_ngcontent-%COMP%]   .product-content[_ngcontent-%COMP%]{padding:12px;gap:8px}.product-card--small[_ngcontent-%COMP%]   .product-content[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:14px}.product-card--small[_ngcontent-%COMP%]   .product-content[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]   .price-main[_ngcontent-%COMP%]   .current-price[_ngcontent-%COMP%]{font-size:16px}.product-card--small[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]{padding:8px 12px 12px}.product-card--small[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]{height:36px;font-size:12px}.product-card--large[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{height:300px}.product-card--large[_ngcontent-%COMP%]   .product-content[_ngcontent-%COMP%]{padding:24px;gap:16px}.product-card--large[_ngcontent-%COMP%]   .product-content[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:18px}.product-card--large[_ngcontent-%COMP%]   .product-content[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]   .price-main[_ngcontent-%COMP%]   .current-price[_ngcontent-%COMP%]{font-size:24px}.product-card--large[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]{padding:20px 24px 24px}.product-card--large[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]{height:48px;font-size:16px}.product-card--horizontal[_ngcontent-%COMP%]{flex-direction:row;height:200px}.product-card--horizontal[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{width:200px;height:100%;flex-shrink:0}.product-card--horizontal[_ngcontent-%COMP%]   .product-content[_ngcontent-%COMP%]{flex:1;padding:16px}.product-card--horizontal[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]{width:200px;flex-shrink:0;border-top:none;border-left:1px solid var(--gray-100);justify-content:center}.product-card--horizontal[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{position:static;opacity:1;transform:none;flex-direction:row;margin-top:auto}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}@media (prefers-color-scheme: dark){.product-card[_ngcontent-%COMP%]{background:var(--gray-800);border-color:var(--gray-700);color:#fff}.product-card[_ngcontent-%COMP%]   .product-content[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{color:#fff}.product-card[_ngcontent-%COMP%]   .product-content[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]   .price-main[_ngcontent-%COMP%]   .current-price[_ngcontent-%COMP%]{color:#60a5fa}.product-card[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]{border-color:var(--gray-700)}.product-card[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]{background:rgba(31,41,55,.95);border-color:#4b556333}}.product-card[_ngcontent-%COMP%]:focus-within{outline:2px solid var(--primary);outline-offset:2px}button[_ngcontent-%COMP%]:focus{outline:2px solid var(--primary);outline-offset:2px}@media print{.product-card[_ngcontent-%COMP%]{break-inside:avoid;box-shadow:none;border:1px solid var(--gray-300)}.product-card[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%], .product-card[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]{display:none}}\"],\n        changeDetection: 0\n      });\n    }\n  }\n  return ProductCardComponent;\n})();\nexport { ProductCardComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}