{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport { filter, takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { checkAuthStatus, logout } from './store/actions/auth.actions';\nimport { selectIsLoading } from './store/selectors/ui.selectors';\nimport { selectIsAuthenticated, selectCurrentUser } from './store/selectors/auth.selectors';\nimport { selectCartItemCount } from './store/selectors/cart.selectors';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/service-worker\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"./shared/components/header/header.component\";\nimport * as i8 from \"./shared/components/footer/footer.component\";\nimport * as i9 from \"./shared/components/loading-spinner/loading-spinner.component\";\nfunction AppComponent_app_loading_spinner_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loading-spinner\", 4);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"overlay\", true);\n  }\n}\nlet AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(store, router, swUpdate) {\n      this.store = store;\n      this.router = router;\n      this.swUpdate = swUpdate;\n      this.updateAvailable = false;\n      this.showBackToTop = false;\n      this.destroy$ = new Subject();\n      this.isLoading$ = this.store.select(selectIsLoading);\n      this.isAuthenticated$ = this.store.select(selectIsAuthenticated);\n      this.currentUser$ = this.store.select(selectCurrentUser);\n      this.cartItemCount$ = this.store.select(selectCartItemCount);\n    }\n    onWindowScroll() {\n      this.showBackToTop = window.pageYOffset > 300;\n    }\n    ngOnInit() {\n      // Check authentication status on app load\n      this.store.dispatch(checkAuthStatus());\n      // Handle route changes with smooth scrolling\n      this.router.events.pipe(filter(event => event instanceof NavigationEnd), takeUntil(this.destroy$)).subscribe(() => {\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth'\n        });\n      });\n      // Subscribe to service worker updates\n      if (this.swUpdate.isEnabled) {\n        this.swUpdate.versionUpdates.subscribe(() => {\n          this.updateAvailable = true;\n        });\n      }\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    scrollToTop() {\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    }\n    updateApp() {\n      if (this.swUpdate.isEnabled) {\n        this.swUpdate.activateUpdate().then(() => {\n          document.location.reload();\n        });\n      }\n    }\n    logout() {\n      this.store.dispatch(logout());\n    }\n    static {\n      this.ɵfac = function AppComponent_Factory(t) {\n        return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.SwUpdate));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AppComponent,\n        selectors: [[\"app-root\"]],\n        hostBindings: function AppComponent_HostBindings(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵlistener(\"scroll\", function AppComponent_scroll_HostBindingHandler($event) {\n              return ctx.onWindowScroll($event);\n            }, false, i0.ɵɵresolveWindow);\n          }\n        },\n        decls: 10,\n        vars: 5,\n        consts: [[1, \"app-layout\"], [\"role\", \"main\", 1, \"main-content\"], [3, \"overlay\", 4, \"ngIf\"], [\"aria-label\", \"Back to top\", \"mat-fab\", \"\", \"color\", \"primary\", 1, \"back-to-top\", 3, \"click\"], [3, \"overlay\"]],\n        template: function AppComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelement(0, \"app-header\");\n            i0.ɵɵelementStart(1, \"div\", 0)(2, \"main\", 1);\n            i0.ɵɵelement(3, \"router-outlet\");\n            i0.ɵɵtemplate(4, AppComponent_app_loading_spinner_4_Template, 1, 1, \"app-loading-spinner\", 2);\n            i0.ɵɵpipe(5, \"async\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(6, \"app-footer\");\n            i0.ɵɵelementStart(7, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_7_listener() {\n              return ctx.scrollToTop();\n            });\n            i0.ɵɵelementStart(8, \"mat-icon\");\n            i0.ɵɵtext(9, \"keyboard_arrow_up\");\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(5, 3, ctx.isLoading$));\n            i0.ɵɵadvance(3);\n            i0.ɵɵclassProp(\"visible\", ctx.showBackToTop);\n          }\n        },\n        dependencies: [i4.NgIf, i2.RouterOutlet, i5.MatFabButton, i6.MatIcon, i7.HeaderComponent, i8.FooterComponent, i9.LoadingSpinnerComponent, i4.AsyncPipe],\n        styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%]; (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  {// webpackBootstrap var __webpack_modules__ = ({286: (() => {throw new Error('Module build failed (from ./node_modules/sass-loader/dist/cjs.js):nunmatched \\\"}\\\".n    \\\\2577n509 \\\\2502    }n    \\\\2502    ^n    \\\\2575n  src/app/app.component.scss 509:3  root stylesheet');})})[_ngcontent-%COMP%]; //[_ngcontent-%COMP%]   startup[_ngcontent-%COMP%]   //[_ngcontent-%COMP%]   Load[_ngcontent-%COMP%]   entry[_ngcontent-%COMP%]   module[_ngcontent-%COMP%]   and[_ngcontent-%COMP%]   return[_ngcontent-%COMP%]   exports[_ngcontent-%COMP%]   //[_ngcontent-%COMP%]   This[_ngcontent-%COMP%]   entry[_ngcontent-%COMP%]   module[_ngcontent-%COMP%]   doesn\\\"t[_ngcontent-%COMP%]   tell[_ngcontent-%COMP%]   about[_ngcontent-%COMP%]   it\\\"s[_ngcontent-%COMP%]   top-level[_ngcontent-%COMP%]   declarations[_ngcontent-%COMP%]   so[_ngcontent-%COMP%]   it[_ngcontent-%COMP%]   can't[_ngcontent-%COMP%]   be[_ngcontent-%COMP%]   inlined\\nvar[_ngcontent-%COMP%]   __webpack_exports__[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] {}; __webpack_modules__[286](); resource = __webpack_exports__;})()[_ngcontent-%COMP%]   ;[_ngcontent-%COMP%]{}\"]\n      });\n    }\n  }\n  return AppComponent;\n})();\nexport { AppComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}