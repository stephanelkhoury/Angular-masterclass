{"ast":null,"code":"import { FormControl } from '@angular/forms';\nimport { Subject, combineLatest } from 'rxjs';\nimport { takeUntil, debounceTime, map } from 'rxjs/operators';\nimport * as ProductActions from '../../store/actions/product.actions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../core/services/product.service\";\nimport * as i4 from \"../../core/services/cart.service\";\nimport * as i5 from \"../../core/services/notification.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/icon\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/material/form-field\";\nimport * as i12 from \"../../shared/components/loading-spinner/loading-spinner.component\";\nimport * as i13 from \"./components/product-filters/product-filters.component\";\nimport * as i14 from \"./components/product-sort/product-sort.component\";\nimport * as i15 from \"./components/product-grid/product-grid.component\";\nimport * as i16 from \"./components/category-menu/category-menu.component\";\nfunction ProductsComponent_app_loading_spinner_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loading-spinner\", 22);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"overlay\", true);\n  }\n}\nfunction ProductsComponent_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_button_12_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.searchControl.setValue(\"\"));\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"close\");\n    i0.ɵɵelementEnd()();\n  }\n}\nclass ProductsComponent {\n  constructor(store, route, router, productService, cartService, notificationService) {\n    this.store = store;\n    this.route = route;\n    this.router = router;\n    this.productService = productService;\n    this.cartService = cartService;\n    this.notificationService = notificationService;\n    this.filters = {};\n    this.searchControl = new FormControl('');\n    this.viewMode = 'grid';\n    this.destroy$ = new Subject();\n    this.products$ = this.store.select(state => state.products.items);\n    this.categories$ = this.store.select(state => state.products.categories);\n    this.loading$ = this.store.select(state => state.ui.loading);\n    // Create filtered products stream\n    this.filteredProducts$ = combineLatest([this.products$, this.route.queryParams.pipe(map(params => {\n      const filters = {};\n      if (params['category']) filters.category = params['category'];\n      if (params['minPrice']) filters.minPrice = Number(params['minPrice']);\n      if (params['maxPrice']) filters.maxPrice = Number(params['maxPrice']);\n      if (params['rating']) filters.rating = Number(params['rating']);\n      if (params['sort']) filters.sort = params['sort'];\n      if (params['search']) {\n        filters.search = params['search'];\n        this.searchControl.setValue(params['search']);\n      }\n      this.filters = filters;\n      return filters;\n    }))]).pipe(map(([products, filters]) => this.filterProducts(products, filters)));\n  }\n  ngOnInit() {\n    // Dispatch actions to load products and categories\n    this.store.dispatch(ProductActions.loadProducts({}));\n    this.store.dispatch(ProductActions.loadCategories());\n    // Handle search input with debounce\n    this.searchControl.valueChanges.pipe(debounceTime(300), takeUntil(this.destroy$)).subscribe(value => {\n      this.updateFilters({\n        search: value || undefined\n      });\n    });\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  onCategoryChange(categoryId) {\n    this.updateFilters({\n      category: categoryId || undefined\n    });\n  }\n  onPriceRangeChange(priceRange) {\n    this.updateFilters({\n      minPrice: priceRange.min,\n      maxPrice: priceRange.max\n    });\n  }\n  onRatingChange(rating) {\n    this.updateFilters({\n      rating: rating || undefined\n    });\n  }\n  onSortChange(sort) {\n    this.updateFilters({\n      sort\n    });\n  }\n  onViewModeChange(mode) {\n    this.viewMode = mode;\n  }\n  onAddToCart(product) {\n    this.cartService.addToCart(product);\n    this.notificationService.show(`${product.name} added to cart`);\n  }\n  onAddToWishlist(product) {\n    // This would dispatch the appropriate action for the wishlist\n    this.notificationService.show(`${product.name} added to wishlist`);\n  }\n  onViewDetails(product) {\n    this.router.navigate(['/products', product.id]);\n  }\n  resetFilters() {\n    this.searchControl.setValue('');\n    this.updateFilters({\n      category: undefined,\n      minPrice: undefined,\n      maxPrice: undefined,\n      rating: undefined,\n      sort: undefined,\n      search: undefined\n    });\n  }\n  updateFilters(newFilters) {\n    const updatedFilters = {\n      ...this.filters,\n      ...newFilters\n    };\n    // Remove undefined values\n    Object.keys(updatedFilters).forEach(key => {\n      if (updatedFilters[key] === undefined) {\n        delete updatedFilters[key];\n      }\n    });\n    // Navigate with new query params\n    this.router.navigate([], {\n      relativeTo: this.route,\n      queryParams: {\n        ...updatedFilters\n      },\n      queryParamsHandling: 'merge'\n    });\n  }\n  filterProducts(products, filters) {\n    if (!filters || Object.keys(filters).length === 0) {\n      return products;\n    }\n    let filtered = [...products];\n    // Filter by category\n    if (filters.category) {\n      filtered = filtered.filter(product => product.category?.id === filters.category);\n    }\n    // Filter by price range\n    if (filters.minPrice !== undefined) {\n      filtered = filtered.filter(product => product.price >= filters.minPrice);\n    }\n    if (filters.maxPrice !== undefined) {\n      filtered = filtered.filter(product => product.price <= filters.maxPrice);\n    }\n    // Filter by rating\n    if (filters.rating !== undefined) {\n      filtered = filtered.filter(product => (product.rating || 0) >= filters.rating);\n    }\n    // Filter by search term\n    if (filters.search) {\n      const searchTerm = filters.search.toLowerCase();\n      filtered = filtered.filter(product => product.name.toLowerCase().includes(searchTerm) || product.description.toLowerCase().includes(searchTerm) || product.category?.name.toLowerCase().includes(searchTerm));\n    }\n    // Sort products\n    if (filters.sort) {\n      switch (filters.sort) {\n        case 'price-low':\n          filtered.sort((a, b) => a.price - b.price);\n          break;\n        case 'price-high':\n          filtered.sort((a, b) => b.price - a.price);\n          break;\n        case 'rating':\n          filtered.sort((a, b) => (b.rating || 0) - (a.rating || 0));\n          break;\n        case 'newest':\n          filtered.sort((a, b) => {\n            const dateA = a.createdAt ? new Date(a.createdAt).getTime() : 0;\n            const dateB = b.createdAt ? new Date(b.createdAt).getTime() : 0;\n            return dateB - dateA;\n          });\n          break;\n        case 'popularity':\n          filtered.sort((a, b) => (b.reviews?.length || 0) - (a.reviews?.length || 0));\n          break;\n      }\n    }\n    return filtered;\n  }\n  static {\n    this.ɵfac = function ProductsComponent_Factory(t) {\n      return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ProductService), i0.ɵɵdirectiveInject(i4.CartService), i0.ɵɵdirectiveInject(i5.NotificationService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProductsComponent,\n      selectors: [[\"app-products\"]],\n      decls: 38,\n      vars: 21,\n      consts: [[1, \"products-page\"], [3, \"overlay\", 4, \"ngIf\"], [1, \"container\"], [1, \"page-header\"], [1, \"page-title\"], [1, \"search-container\"], [\"appearance\", \"outline\", 1, \"search-field\"], [\"matInput\", \"\", \"placeholder\", \"Search by name, category or description\", 3, \"formControl\"], [\"matSuffix\", \"\", \"mat-icon-button\", \"\", \"aria-label\", \"Clear\", 3, \"click\", 4, \"ngIf\"], [\"matSuffix\", \"\"], [1, \"products-layout\"], [1, \"filters-sidebar\"], [3, \"categories\", \"selectedCategory\", \"categorySelected\"], [3, \"minPrice\", \"maxPrice\", \"rating\", \"priceRangeChanged\", \"ratingChanged\"], [1, \"reset-filters\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"products-content\"], [1, \"products-toolbar\"], [3, \"currentSort\", \"sortChanged\"], [1, \"view-options\"], [\"mat-icon-button\", \"\", 3, \"click\"], [3, \"products\", \"viewMode\", \"addToCart\", \"addToWishlist\", \"viewDetails\"], [3, \"overlay\"], [\"matSuffix\", \"\", \"mat-icon-button\", \"\", \"aria-label\", \"Clear\", 3, \"click\"]],\n      template: function ProductsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, ProductsComponent_app_loading_spinner_1_Template, 1, 1, \"app-loading-spinner\", 1);\n          i0.ɵɵpipe(2, \"async\");\n          i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"h1\", 4);\n          i0.ɵɵtext(6, \"Shop Products\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"div\", 5)(8, \"mat-form-field\", 6)(9, \"mat-label\");\n          i0.ɵɵtext(10, \"Search products\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(11, \"input\", 7);\n          i0.ɵɵtemplate(12, ProductsComponent_button_12_Template, 3, 0, \"button\", 8);\n          i0.ɵɵelementStart(13, \"mat-icon\", 9);\n          i0.ɵɵtext(14, \"search\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(15, \"div\", 10)(16, \"aside\", 11)(17, \"app-category-menu\", 12);\n          i0.ɵɵlistener(\"categorySelected\", function ProductsComponent_Template_app_category_menu_categorySelected_17_listener($event) {\n            return ctx.onCategoryChange($event);\n          });\n          i0.ɵɵpipe(18, \"async\");\n          i0.ɵɵtext(19, \"> \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"app-product-filters\", 13);\n          i0.ɵɵlistener(\"priceRangeChanged\", function ProductsComponent_Template_app_product_filters_priceRangeChanged_20_listener($event) {\n            return ctx.onPriceRangeChange($event);\n          })(\"ratingChanged\", function ProductsComponent_Template_app_product_filters_ratingChanged_20_listener($event) {\n            return ctx.onRatingChange($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"div\", 14)(22, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function ProductsComponent_Template_button_click_22_listener() {\n            return ctx.resetFilters();\n          });\n          i0.ɵɵelementStart(23, \"mat-icon\");\n          i0.ɵɵtext(24, \"refresh\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(25, \" Reset Filters \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(26, \"div\", 16)(27, \"div\", 17)(28, \"app-product-sort\", 18);\n          i0.ɵɵlistener(\"sortChanged\", function ProductsComponent_Template_app_product_sort_sortChanged_28_listener($event) {\n            return ctx.onSortChange($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"div\", 19)(30, \"button\", 20);\n          i0.ɵɵlistener(\"click\", function ProductsComponent_Template_button_click_30_listener() {\n            return ctx.onViewModeChange(\"grid\");\n          });\n          i0.ɵɵelementStart(31, \"mat-icon\");\n          i0.ɵɵtext(32, \"grid_view\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(33, \"button\", 20);\n          i0.ɵɵlistener(\"click\", function ProductsComponent_Template_button_click_33_listener() {\n            return ctx.onViewModeChange(\"list\");\n          });\n          i0.ɵɵelementStart(34, \"mat-icon\");\n          i0.ɵɵtext(35, \"view_list\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(36, \"app-product-grid\", 21);\n          i0.ɵɵlistener(\"addToCart\", function ProductsComponent_Template_app_product_grid_addToCart_36_listener($event) {\n            return ctx.onAddToCart($event);\n          })(\"addToWishlist\", function ProductsComponent_Template_app_product_grid_addToWishlist_36_listener($event) {\n            return ctx.onAddToWishlist($event);\n          })(\"viewDetails\", function ProductsComponent_Template_app_product_grid_viewDetails_36_listener($event) {\n            return ctx.onViewDetails($event);\n          });\n          i0.ɵɵpipe(37, \"async\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 15, ctx.loading$));\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"formControl\", ctx.searchControl);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.searchControl.value);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"categories\", i0.ɵɵpipeBind1(18, 17, ctx.categories$))(\"selectedCategory\", ctx.filters.category || null);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"minPrice\", ctx.filters.minPrice || 0)(\"maxPrice\", ctx.filters.maxPrice || 1000)(\"rating\", ctx.filters.rating || 0);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"currentSort\", ctx.filters.sort || \"name\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"active\", ctx.viewMode === \"grid\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵclassProp(\"active\", ctx.viewMode === \"list\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"products\", i0.ɵɵpipeBind1(37, 19, ctx.filteredProducts$))(\"viewMode\", ctx.viewMode);\n        }\n      },\n      dependencies: [i6.NgIf, i7.DefaultValueAccessor, i7.NgControlStatus, i7.FormControlDirective, i8.MatButton, i8.MatIconButton, i9.MatIcon, i10.MatInput, i11.MatFormField, i11.MatLabel, i11.MatSuffix, i12.LoadingSpinnerComponent, i13.ProductFiltersComponent, i14.ProductSortComponent, i15.ProductGridComponent, i16.CategoryMenuComponent, i6.AsyncPipe],\n      styles: [\".products-container[_ngcontent-%COMP%] {\\n  padding: var(--spacing-lg) 0;\\n  min-height: 80vh;\\n}\\n\\n.products-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: var(--spacing-xl);\\n  flex-wrap: wrap;\\n  gap: var(--spacing-md);\\n}\\n\\n.products-title[_ngcontent-%COMP%] {\\n  font-size: 2.5rem;\\n  font-weight: 700;\\n  color: var(--text-primary);\\n  margin: 0;\\n}\\n\\n.products-controls[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: var(--spacing-md);\\n  align-items: center;\\n  flex-wrap: wrap;\\n}\\n\\n.filter-controls[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: var(--spacing-sm);\\n  align-items: center;\\n}\\n\\n.sort-select[_ngcontent-%COMP%] {\\n  min-width: 200px;\\n}\\n\\n.view-toggle[_ngcontent-%COMP%] {\\n  display: flex;\\n  border: 1px solid var(--border-color);\\n  border-radius: var(--radius-md);\\n  overflow: hidden;\\n}\\n.view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  padding: var(--spacing-sm) var(--spacing-md);\\n  border: none;\\n  background: var(--bg-primary);\\n  color: var(--text-secondary);\\n  cursor: pointer;\\n  transition: all var(--transition-fast);\\n}\\n.view-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%] {\\n  background: var(--primary-color);\\n  color: white;\\n}\\n.view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.active) {\\n  background: var(--bg-secondary);\\n}\\n\\n.products-content[_ngcontent-%COMP%] {\\n  display: grid;\\n  gap: var(--spacing-xl);\\n  grid-template-columns: 250px 1fr;\\n}\\n@media (max-width: 992px) {\\n  .products-content[_ngcontent-%COMP%] {\\n    grid-template-columns: 1fr;\\n    gap: var(--spacing-lg);\\n  }\\n}\\n\\n.filters-sidebar[_ngcontent-%COMP%] {\\n  background: var(--bg-primary);\\n  border-radius: var(--radius-lg);\\n  padding: var(--spacing-lg);\\n  height: -moz-fit-content;\\n  height: fit-content;\\n  box-shadow: var(--shadow-sm);\\n}\\n@media (max-width: 992px) {\\n  .filters-sidebar[_ngcontent-%COMP%] {\\n    order: 2;\\n  }\\n}\\n\\n@media (max-width: 992px) {\\n  .products-main[_ngcontent-%COMP%] {\\n    order: 1;\\n  }\\n}\\n\\n.products-grid[_ngcontent-%COMP%] {\\n  display: grid;\\n  gap: var(--spacing-lg);\\n}\\n.products-grid.grid-view[_ngcontent-%COMP%] {\\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\\n}\\n.products-grid.list-view[_ngcontent-%COMP%] {\\n  grid-template-columns: 1fr;\\n}\\n@media (max-width: 768px) {\\n  .products-grid[_ngcontent-%COMP%] {\\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\\n    gap: var(--spacing-md);\\n  }\\n}\\n@media (max-width: 480px) {\\n  .products-grid[_ngcontent-%COMP%] {\\n    grid-template-columns: 1fr;\\n  }\\n}\\n\\n.no-products[_ngcontent-%COMP%] {\\n  text-align: center;\\n  padding: var(--spacing-2xl);\\n}\\n.no-products[_ngcontent-%COMP%]   .no-products-icon[_ngcontent-%COMP%] {\\n  font-size: 4rem;\\n  color: var(--text-muted);\\n  margin-bottom: var(--spacing-lg);\\n}\\n.no-products[_ngcontent-%COMP%]   .no-products-title[_ngcontent-%COMP%] {\\n  font-size: 1.5rem;\\n  color: var(--text-primary);\\n  margin-bottom: var(--spacing-md);\\n}\\n.no-products[_ngcontent-%COMP%]   .no-products-description[_ngcontent-%COMP%] {\\n  color: var(--text-secondary);\\n  margin-bottom: var(--spacing-lg);\\n}\\n\\n.pagination-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  margin-top: var(--spacing-xl);\\n}\\n\\n.loading-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  min-height: 400px;\\n}\\n\\n@keyframes _ngcontent-%COMP%_spin {\\n  to {\\n    transform: rotate(360deg);\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvcHJvZHVjdHMvcHJvZHVjdHMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDRSw0QkFBQTtFQUNBLGdCQUFBO0FBQUY7O0FBR0E7RUFDRSxhQUFBO0VBQ0EsOEJBQUE7RUFDQSxtQkFBQTtFQUNBLGdDQUFBO0VBQ0EsZUFBQTtFQUNBLHNCQUFBO0FBQUY7O0FBR0E7RUFDRSxpQkFBQTtFQUNBLGdCQUFBO0VBQ0EsMEJBQUE7RUFDQSxTQUFBO0FBQUY7O0FBR0E7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxtQkFBQTtFQUNBLGVBQUE7QUFBRjs7QUFHQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLG1CQUFBO0FBQUY7O0FBR0E7RUFDRSxnQkFBQTtBQUFGOztBQUdBO0VBQ0UsYUFBQTtFQUNBLHFDQUFBO0VBQ0EsK0JBQUE7RUFDQSxnQkFBQTtBQUFGO0FBRUU7RUFDRSw0Q0FBQTtFQUNBLFlBQUE7RUFDQSw2QkFBQTtFQUNBLDRCQUFBO0VBQ0EsZUFBQTtFQUNBLHNDQUFBO0FBQUo7QUFFSTtFQUNFLGdDQUFBO0VBQ0EsWUFBQTtBQUFOO0FBR0k7RUFDRSwrQkFBQTtBQUROOztBQU1BO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsZ0NBQUE7QUFIRjtBQUtFO0VBTEY7SUFNSSwwQkFBQTtJQUNBLHNCQUFBO0VBRkY7QUFDRjs7QUFLQTtFQUNFLDZCQUFBO0VBQ0EsK0JBQUE7RUFDQSwwQkFBQTtFQUNBLHdCQUFBO0VBQUEsbUJBQUE7RUFDQSw0QkFBQTtBQUZGO0FBSUU7RUFQRjtJQVFJLFFBQUE7RUFERjtBQUNGOztBQUtFO0VBREY7SUFFSSxRQUFBO0VBREY7QUFDRjs7QUFJQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtBQURGO0FBR0U7RUFDRSw0REFBQTtBQURKO0FBSUU7RUFDRSwwQkFBQTtBQUZKO0FBS0U7RUFaRjtJQWFJLDREQUFBO0lBQ0Esc0JBQUE7RUFGRjtBQUNGO0FBSUU7RUFqQkY7SUFrQkksMEJBQUE7RUFERjtBQUNGOztBQUlBO0VBQ0Usa0JBQUE7RUFDQSwyQkFBQTtBQURGO0FBR0U7RUFDRSxlQUFBO0VBQ0Esd0JBQUE7RUFDQSxnQ0FBQTtBQURKO0FBSUU7RUFDRSxpQkFBQTtFQUNBLDBCQUFBO0VBQ0EsZ0NBQUE7QUFGSjtBQUtFO0VBQ0UsNEJBQUE7RUFDQSxnQ0FBQTtBQUhKOztBQU9BO0VBQ0UsYUFBQTtFQUNBLHVCQUFBO0VBQ0EsNkJBQUE7QUFKRjs7QUFPQTtFQUNFLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsaUJBQUE7QUFKRjs7QUFPQTtFQUNFO0lBQ0UseUJBQUE7RUFKRjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTW9kZXJuIFByb2R1Y3RzIENvbXBvbmVudCBTdHlsZXNcbi5wcm9kdWN0cy1jb250YWluZXIge1xuICBwYWRkaW5nOiB2YXIoLS1zcGFjaW5nLWxnKSAwO1xuICBtaW4taGVpZ2h0OiA4MHZoO1xufVxuXG4ucHJvZHVjdHMtaGVhZGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiB2YXIoLS1zcGFjaW5nLXhsKTtcbiAgZmxleC13cmFwOiB3cmFwO1xuICBnYXA6IHZhcigtLXNwYWNpbmctbWQpO1xufVxuXG4ucHJvZHVjdHMtdGl0bGUge1xuICBmb250LXNpemU6IDIuNXJlbTtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7XG4gIG1hcmdpbjogMDtcbn1cblxuLnByb2R1Y3RzLWNvbnRyb2xzIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiB2YXIoLS1zcGFjaW5nLW1kKTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZmxleC13cmFwOiB3cmFwO1xufVxuXG4uZmlsdGVyLWNvbnRyb2xzIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiB2YXIoLS1zcGFjaW5nLXNtKTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cblxuLnNvcnQtc2VsZWN0IHtcbiAgbWluLXdpZHRoOiAyMDBweDtcbn1cblxuLnZpZXctdG9nZ2xlIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgXG4gIGJ1dHRvbiB7XG4gICAgcGFkZGluZzogdmFyKC0tc3BhY2luZy1zbSkgdmFyKC0tc3BhY2luZy1tZCk7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXByaW1hcnkpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IGFsbCB2YXIoLS10cmFuc2l0aW9uLWZhc3QpO1xuICAgIFxuICAgICYuYWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnktY29sb3IpO1xuICAgICAgY29sb3I6IHdoaXRlO1xuICAgIH1cbiAgICBcbiAgICAmOmhvdmVyOm5vdCguYWN0aXZlKSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1zZWNvbmRhcnkpO1xuICAgIH1cbiAgfVxufVxuXG4ucHJvZHVjdHMtY29udGVudCB7XG4gIGRpc3BsYXk6IGdyaWQ7XG4gIGdhcDogdmFyKC0tc3BhY2luZy14bCk7XG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMjUwcHggMWZyO1xuICBcbiAgQG1lZGlhIChtYXgtd2lkdGg6IDk5MnB4KSB7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7XG4gICAgZ2FwOiB2YXIoLS1zcGFjaW5nLWxnKTtcbiAgfVxufVxuXG4uZmlsdGVycy1zaWRlYmFyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmctcHJpbWFyeSk7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1sZyk7XG4gIHBhZGRpbmc6IHZhcigtLXNwYWNpbmctbGcpO1xuICBoZWlnaHQ6IGZpdC1jb250ZW50O1xuICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctc20pO1xuICBcbiAgQG1lZGlhIChtYXgtd2lkdGg6IDk5MnB4KSB7XG4gICAgb3JkZXI6IDI7XG4gIH1cbn1cblxuLnByb2R1Y3RzLW1haW4ge1xuICBAbWVkaWEgKG1heC13aWR0aDogOTkycHgpIHtcbiAgICBvcmRlcjogMTtcbiAgfVxufVxuXG4ucHJvZHVjdHMtZ3JpZCB7XG4gIGRpc3BsYXk6IGdyaWQ7XG4gIGdhcDogdmFyKC0tc3BhY2luZy1sZyk7XG4gIFxuICAmLmdyaWQtdmlldyB7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMjgwcHgsIDFmcikpO1xuICB9XG4gIFxuICAmLmxpc3QtdmlldyB7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7XG4gIH1cbiAgXG4gIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDI1MHB4LCAxZnIpKTtcbiAgICBnYXA6IHZhcigtLXNwYWNpbmctbWQpO1xuICB9XG4gIFxuICBAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHtcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjtcbiAgfVxufVxuXG4ubm8tcHJvZHVjdHMge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHBhZGRpbmc6IHZhcigtLXNwYWNpbmctMnhsKTtcbiAgXG4gIC5uby1wcm9kdWN0cy1pY29uIHtcbiAgICBmb250LXNpemU6IDRyZW07XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIG1hcmdpbi1ib3R0b206IHZhcigtLXNwYWNpbmctbGcpO1xuICB9XG4gIFxuICAubm8tcHJvZHVjdHMtdGl0bGUge1xuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpO1xuICAgIG1hcmdpbi1ib3R0b206IHZhcigtLXNwYWNpbmctbWQpO1xuICB9XG4gIFxuICAubm8tcHJvZHVjdHMtZGVzY3JpcHRpb24ge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7XG4gICAgbWFyZ2luLWJvdHRvbTogdmFyKC0tc3BhY2luZy1sZyk7XG4gIH1cbn1cblxuLnBhZ2luYXRpb24tY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIG1hcmdpbi10b3A6IHZhcigtLXNwYWNpbmcteGwpO1xufVxuXG4ubG9hZGluZy1jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgbWluLWhlaWdodDogNDAwcHg7XG59XG5cbkBrZXlmcmFtZXMgc3BpbiB7XG4gIHRvIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}\nexport { ProductsComponent };","map":{"version":3,"names":["FormControl","Subject","combineLatest","takeUntil","debounceTime","map","ProductActions","i0","ɵɵelement","ɵɵproperty","ɵɵelementStart","ɵɵlistener","ProductsComponent_button_12_Template_button_click_0_listener","ɵɵrestoreView","_r3","ctx_r2","ɵɵnextContext","ɵɵresetView","searchControl","setValue","ɵɵtext","ɵɵelementEnd","ProductsComponent","constructor","store","route","router","productService","cartService","notificationService","filters","viewMode","destroy$","products$","select","state","products","items","categories$","categories","loading$","ui","loading","filteredProducts$","queryParams","pipe","params","category","minPrice","Number","maxPrice","rating","sort","search","filterProducts","ngOnInit","dispatch","loadProducts","loadCategories","valueChanges","subscribe","value","updateFilters","undefined","ngOnDestroy","next","complete","onCategoryChange","categoryId","onPriceRangeChange","priceRange","min","max","onRatingChange","onSortChange","onViewModeChange","mode","onAddToCart","product","addToCart","show","name","onAddToWishlist","onViewDetails","navigate","id","resetFilters","newFilters","updatedFilters","Object","keys","forEach","key","relativeTo","queryParamsHandling","length","filtered","filter","price","searchTerm","toLowerCase","includes","description","a","b","dateA","createdAt","Date","getTime","dateB","reviews","ɵɵdirectiveInject","i1","Store","i2","ActivatedRoute","Router","i3","ProductService","i4","CartService","i5","NotificationService","selectors","decls","vars","consts","template","ProductsComponent_Template","rf","ctx","ɵɵtemplate","ProductsComponent_app_loading_spinner_1_Template","ProductsComponent_button_12_Template","ProductsComponent_Template_app_category_menu_categorySelected_17_listener","$event","ProductsComponent_Template_app_product_filters_priceRangeChanged_20_listener","ProductsComponent_Template_app_product_filters_ratingChanged_20_listener","ProductsComponent_Template_button_click_22_listener","ProductsComponent_Template_app_product_sort_sortChanged_28_listener","ProductsComponent_Template_button_click_30_listener","ProductsComponent_Template_button_click_33_listener","ProductsComponent_Template_app_product_grid_addToCart_36_listener","ProductsComponent_Template_app_product_grid_addToWishlist_36_listener","ProductsComponent_Template_app_product_grid_viewDetails_36_listener","ɵɵadvance","ɵɵpipeBind1","ɵɵclassProp"],"sources":["/Users/stephanelkhoury/Documents/GitHub/Angular-masterclass/Ecommerce-Project/code-examples/angular-ecommerce/src/app/features/products/products.component.ts","/Users/stephanelkhoury/Documents/GitHub/Angular-masterclass/Ecommerce-Project/code-examples/angular-ecommerce/src/app/features/products/products.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormControl } from '@angular/forms';\nimport { Store } from '@ngrx/store';\nimport { Observable, Subject, combineLatest } from 'rxjs';\nimport { takeUntil, debounceTime, map } from 'rxjs/operators';\n\nimport { AppState } from '../../store';\nimport { Product, Category } from '../../core/models/product.model';\nimport { ProductService } from '../../core/services/product.service';\nimport { CartService } from '../../core/services/cart.service';\nimport { NotificationService } from '../../core/services/notification.service';\nimport * as ProductActions from '../../store/actions/product.actions';\n\ninterface ProductFilters {\n  [key: string]: string | number | undefined;\n  category?: string;\n  minPrice?: number;\n  maxPrice?: number;\n  rating?: number;\n  sort?: string;\n  search?: string;\n}\n\n@Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.scss']\n})\nexport class ProductsComponent implements OnInit, OnDestroy {\n  products$: Observable<Product[]>;\n  categories$: Observable<Category[]>;\n  filteredProducts$: Observable<Product[]>;\n  loading$: Observable<boolean>;\n  \n  filters: ProductFilters = {};\n  searchControl = new FormControl('');\n  \n  viewMode: 'grid' | 'list' = 'grid';\n  \n  private destroy$ = new Subject<void>();\n  \n  constructor(\n    private store: Store<AppState>,\n    private route: ActivatedRoute,\n    private router: Router,\n    private productService: ProductService,\n    private cartService: CartService,\n    private notificationService: NotificationService\n  ) {\n    this.products$ = this.store.select(state => state.products.items);\n    this.categories$ = this.store.select(state => state.products.categories);\n    this.loading$ = this.store.select(state => state.ui.loading);\n    \n    // Create filtered products stream\n    this.filteredProducts$ = combineLatest([\n      this.products$,\n      this.route.queryParams.pipe(map(params => {\n        const filters: ProductFilters = {};\n        \n        if (params['category']) filters.category = params['category'];\n        if (params['minPrice']) filters.minPrice = Number(params['minPrice']);\n        if (params['maxPrice']) filters.maxPrice = Number(params['maxPrice']);\n        if (params['rating']) filters.rating = Number(params['rating']);\n        if (params['sort']) filters.sort = params['sort'];\n        if (params['search']) {\n          filters.search = params['search'];\n          this.searchControl.setValue(params['search']);\n        }\n        \n        this.filters = filters;\n        return filters;\n      }))\n    ]).pipe(\n      map(([products, filters]) => this.filterProducts(products, filters))\n    );\n  }\n  \n  ngOnInit(): void {\n    // Dispatch actions to load products and categories\n    this.store.dispatch(ProductActions.loadProducts({}));\n    this.store.dispatch(ProductActions.loadCategories());\n    \n    // Handle search input with debounce\n    this.searchControl.valueChanges.pipe(\n      debounceTime(300),\n      takeUntil(this.destroy$)\n    ).subscribe(value => {\n      this.updateFilters({ search: value || undefined });\n    });\n  }\n  \n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  \n  onCategoryChange(categoryId: string | null): void {\n    this.updateFilters({ category: categoryId || undefined });\n  }\n  \n  onPriceRangeChange(priceRange: { min: number, max: number }): void {\n    this.updateFilters({\n      minPrice: priceRange.min,\n      maxPrice: priceRange.max\n    });\n  }\n  \n  onRatingChange(rating: number | null): void {\n    this.updateFilters({ rating: rating || undefined });\n  }\n  \n  onSortChange(sort: string): void {\n    this.updateFilters({ sort });\n  }\n  \n  onViewModeChange(mode: 'grid' | 'list'): void {\n    this.viewMode = mode;\n  }\n  \n  onAddToCart(product: Product): void {\n    this.cartService.addToCart(product);\n    this.notificationService.show(`${product.name} added to cart`);\n  }\n  \n  onAddToWishlist(product: Product): void {\n    // This would dispatch the appropriate action for the wishlist\n    this.notificationService.show(`${product.name} added to wishlist`);\n  }\n  \n  onViewDetails(product: Product): void {\n    this.router.navigate(['/products', product.id]);\n  }\n  \n  resetFilters(): void {\n    this.searchControl.setValue('');\n    this.updateFilters({\n      category: undefined,\n      minPrice: undefined,\n      maxPrice: undefined,\n      rating: undefined,\n      sort: undefined,\n      search: undefined\n    });\n  }\n  \n  private updateFilters(newFilters: Partial<ProductFilters>): void {\n    const updatedFilters = { ...this.filters, ...newFilters };\n    \n    // Remove undefined values\n    Object.keys(updatedFilters).forEach(key => {\n      if (updatedFilters[key] === undefined) {\n        delete updatedFilters[key];\n      }\n    });\n    \n    // Navigate with new query params\n    this.router.navigate([], {\n      relativeTo: this.route,\n      queryParams: { ...updatedFilters },\n      queryParamsHandling: 'merge'\n    });\n  }\n  \n  private filterProducts(products: Product[], filters: ProductFilters): Product[] {\n    if (!filters || Object.keys(filters).length === 0) {\n      return products;\n    }\n    \n    let filtered = [...products];\n    \n    // Filter by category\n    if (filters.category) {\n      filtered = filtered.filter(product => product.category?.id === filters.category);\n    }\n    \n    // Filter by price range\n    if (filters.minPrice !== undefined) {\n      filtered = filtered.filter(product => product.price >= filters.minPrice!);\n    }\n    \n    if (filters.maxPrice !== undefined) {\n      filtered = filtered.filter(product => product.price <= filters.maxPrice!);\n    }\n    \n    // Filter by rating\n    if (filters.rating !== undefined) {\n      filtered = filtered.filter(product => (product.rating || 0) >= filters.rating!);\n    }\n    \n    // Filter by search term\n    if (filters.search) {\n      const searchTerm = filters.search.toLowerCase();\n      filtered = filtered.filter(product => \n        product.name.toLowerCase().includes(searchTerm) || \n        product.description.toLowerCase().includes(searchTerm) ||\n        product.category?.name.toLowerCase().includes(searchTerm)\n      );\n    }\n    \n    // Sort products\n    if (filters.sort) {\n      switch (filters.sort) {\n        case 'price-low':\n          filtered.sort((a, b) => a.price - b.price);\n          break;\n        case 'price-high':\n          filtered.sort((a, b) => b.price - a.price);\n          break;\n        case 'rating':\n          filtered.sort((a, b) => (b.rating || 0) - (a.rating || 0));\n          break;\n        case 'newest':\n          filtered.sort((a, b) => {\n            const dateA = a.createdAt ? new Date(a.createdAt).getTime() : 0;\n            const dateB = b.createdAt ? new Date(b.createdAt).getTime() : 0;\n            return dateB - dateA;\n          });\n          break;\n        case 'popularity':\n          filtered.sort((a, b) => (b.reviews?.length || 0) - (a.reviews?.length || 0));\n          break;\n      }\n    }\n    \n    return filtered;\n  }\n}\n","<div class=\"products-page\">\n  <!-- Loading Spinner -->\n  <app-loading-spinner *ngIf=\"loading$ | async\" [overlay]=\"true\"></app-loading-spinner>\n  \n  <div class=\"container\">\n    <!-- Page Header -->\n    <div class=\"page-header\">\n      <h1 class=\"page-title\">Shop Products</h1>\n      \n      <!-- Search Bar -->\n      <div class=\"search-container\">\n        <mat-form-field appearance=\"outline\" class=\"search-field\">\n          <mat-label>Search products</mat-label>\n          <input matInput [formControl]=\"searchControl\" placeholder=\"Search by name, category or description\">\n          <button *ngIf=\"searchControl.value\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"searchControl.setValue('')\">\n            <mat-icon>close</mat-icon>\n          </button>\n          <mat-icon matSuffix>search</mat-icon>\n        </mat-form-field>\n      </div>\n    </div>\n    \n    <div class=\"products-layout\">\n      <!-- Sidebar / Filters -->\n      <aside class=\"filters-sidebar\">\n        <!-- Category Menu -->\n        <app-category-menu \n          [categories]=\"categories$ | async\" \n          [selectedCategory]=\"filters.category || null\"\n          (categorySelected)=\"onCategoryChange($any($event))\">>\n        </app-category-menu>\n        \n        <!-- Product Filters -->\n        <app-product-filters\n          [minPrice]=\"filters.minPrice || 0\"\n          [maxPrice]=\"filters.maxPrice || 1000\"\n          [rating]=\"filters.rating || 0\"\n          (priceRangeChanged)=\"onPriceRangeChange($event)\"\n          (ratingChanged)=\"onRatingChange($event)\">\n        </app-product-filters>\n        \n        <!-- Reset Filters Button -->\n        <div class=\"reset-filters\">\n          <button mat-stroked-button color=\"primary\" (click)=\"resetFilters()\">\n            <mat-icon>refresh</mat-icon>\n            Reset Filters\n          </button>\n        </div>\n      </aside>\n      \n      <!-- Products Content -->\n      <div class=\"products-content\">\n        <!-- Toolbar with sort and view options -->\n        <div class=\"products-toolbar\">\n          <app-product-sort \n            [currentSort]=\"filters.sort || 'name'\"\n            (sortChanged)=\"onSortChange($event)\">\n          </app-product-sort>\n          \n          <div class=\"view-options\">\n            <button mat-icon-button [class.active]=\"viewMode === 'grid'\" (click)=\"onViewModeChange('grid')\">\n              <mat-icon>grid_view</mat-icon>\n            </button>\n            <button mat-icon-button [class.active]=\"viewMode === 'list'\" (click)=\"onViewModeChange('list')\">\n              <mat-icon>view_list</mat-icon>\n            </button>\n          </div>\n        </div>\n        \n        <!-- Products Grid -->\n        <app-product-grid\n          [products]=\"filteredProducts$ | async\"\n          [viewMode]=\"viewMode\"\n          (addToCart)=\"onAddToCart($event)\"\n          (addToWishlist)=\"onAddToWishlist($event)\"\n          (viewDetails)=\"onViewDetails($event)\">\n        </app-product-grid>\n      </div>\n    </div>\n  </div>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}