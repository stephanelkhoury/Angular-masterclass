{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport { filter, takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { checkAuthStatus, logout } from './store/actions/auth.actions';\nimport { selectIsLoading } from './store/selectors/ui.selectors';\nimport { selectIsAuthenticated, selectCurrentUser } from './store/selectors/auth.selectors';\nimport { selectCartItemCount } from './store/selectors/cart.selectors';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/service-worker\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"./shared/components/header/header.component\";\nimport * as i8 from \"./shared/components/footer/footer.component\";\nimport * as i9 from \"./shared/components/loading-spinner/loading-spinner.component\";\nfunction AppComponent_app_loading_spinner_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loading-spinner\", 4);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"overlay\", true);\n  }\n}\nclass AppComponent {\n  constructor(store, router, swUpdate) {\n    this.store = store;\n    this.router = router;\n    this.swUpdate = swUpdate;\n    this.updateAvailable = false;\n    this.showBackToTop = false;\n    this.destroy$ = new Subject();\n    this.isLoading$ = this.store.select(selectIsLoading);\n    this.isAuthenticated$ = this.store.select(selectIsAuthenticated);\n    this.currentUser$ = this.store.select(selectCurrentUser);\n    this.cartItemCount$ = this.store.select(selectCartItemCount);\n  }\n  onWindowScroll() {\n    this.showBackToTop = window.pageYOffset > 300;\n  }\n  ngOnInit() {\n    // Check authentication status on app load\n    this.store.dispatch(checkAuthStatus());\n    // Handle route changes with smooth scrolling\n    this.router.events.pipe(filter(event => event instanceof NavigationEnd), takeUntil(this.destroy$)).subscribe(() => {\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    });\n    // Subscribe to service worker updates\n    if (this.swUpdate.isEnabled) {\n      this.swUpdate.versionUpdates.subscribe(() => {\n        this.updateAvailable = true;\n      });\n    }\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  scrollToTop() {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  }\n  updateApp() {\n    if (this.swUpdate.isEnabled) {\n      this.swUpdate.activateUpdate().then(() => {\n        document.location.reload();\n      });\n    }\n  }\n  logout() {\n    this.store.dispatch(logout());\n  }\n  static {\n    this.ɵfac = function AppComponent_Factory(t) {\n      return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.SwUpdate));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppComponent,\n      selectors: [[\"app-root\"]],\n      hostBindings: function AppComponent_HostBindings(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵlistener(\"scroll\", function AppComponent_scroll_HostBindingHandler($event) {\n            return ctx.onWindowScroll($event);\n          }, false, i0.ɵɵresolveWindow);\n        }\n      },\n      decls: 10,\n      vars: 5,\n      consts: [[1, \"app-layout\"], [\"role\", \"main\", 1, \"main-content\"], [3, \"overlay\", 4, \"ngIf\"], [\"aria-label\", \"Back to top\", \"mat-fab\", \"\", \"color\", \"primary\", 1, \"back-to-top\", 3, \"click\"], [3, \"overlay\"]],\n      template: function AppComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-header\");\n          i0.ɵɵelementStart(1, \"div\", 0)(2, \"main\", 1);\n          i0.ɵɵelement(3, \"router-outlet\");\n          i0.ɵɵtemplate(4, AppComponent_app_loading_spinner_4_Template, 1, 1, \"app-loading-spinner\", 2);\n          i0.ɵɵpipe(5, \"async\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(6, \"app-footer\");\n          i0.ɵɵelementStart(7, \"button\", 3);\n          i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_7_listener() {\n            return ctx.scrollToTop();\n          });\n          i0.ɵɵelementStart(8, \"mat-icon\");\n          i0.ɵɵtext(9, \"keyboard_arrow_up\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(5, 3, ctx.isLoading$));\n          i0.ɵɵadvance(3);\n          i0.ɵɵclassProp(\"visible\", ctx.showBackToTop);\n        }\n      },\n      dependencies: [i4.NgIf, i2.RouterOutlet, i5.MatFabButton, i6.MatIcon, i7.HeaderComponent, i8.FooterComponent, i9.LoadingSpinnerComponent, i4.AsyncPipe],\n      styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%];\\n\\n (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n\\n \\tvar __webpack_modules__ = ({\\n\\n\\n 282:\\n\\n\\n\\n\\n\\n (() => {\\n\\nthrow new Error(\\\"Module build failed (from ./node_modules/sass-loader/dist/cjs.js):\\\\nunmatched \\\\\\\"}\\\\\\\".\\\\n    \\u2577\\\\n509 \\u2502   }\\\\n    \\u2502   ^\\\\n    \\u2575\\\\n  src/app/app.component.scss 509:3  root stylesheet\\\");\\n\\n\\n })\\n\\n\\n \\t})[_ngcontent-%COMP%];\\n\\n\\n\\n \\t\\n\\n \\t//[_ngcontent-%COMP%]   startup\\n\\n[_ngcontent-%COMP%]   //[_ngcontent-%COMP%]   Load[_ngcontent-%COMP%]   entry[_ngcontent-%COMP%]   module[_ngcontent-%COMP%]   and[_ngcontent-%COMP%]   return[_ngcontent-%COMP%]   exports\\n\\n[_ngcontent-%COMP%]   //[_ngcontent-%COMP%]   This[_ngcontent-%COMP%]   entry[_ngcontent-%COMP%]   module[_ngcontent-%COMP%]   doesn't[_ngcontent-%COMP%]   tell[_ngcontent-%COMP%]   about[_ngcontent-%COMP%]   it's[_ngcontent-%COMP%]   top-level[_ngcontent-%COMP%]   declarations[_ngcontent-%COMP%]   so[_ngcontent-%COMP%]   it[_ngcontent-%COMP%]   can't[_ngcontent-%COMP%]   be[_ngcontent-%COMP%]   inlined\\n\\n[_ngcontent-%COMP%]   var[_ngcontent-%COMP%]   __webpack_exports__[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] {};\\n\\n \\t__webpack_modules__[282]();\\n\\n \\tresource = __webpack_exports__;\\n\\n \\t\\n\\n })()\\n;\"]\n    });\n  }\n}\nexport { AppComponent };","map":{"version":3,"names":["NavigationEnd","filter","takeUntil","Subject","checkAuthStatus","logout","selectIsLoading","selectIsAuthenticated","selectCurrentUser","selectCartItemCount","i0","ɵɵelement","ɵɵproperty","AppComponent","constructor","store","router","swUpdate","updateAvailable","showBackToTop","destroy$","isLoading$","select","isAuthenticated$","currentUser$","cartItemCount$","onWindowScroll","window","pageYOffset","ngOnInit","dispatch","events","pipe","event","subscribe","scrollTo","top","behavior","isEnabled","versionUpdates","ngOnDestroy","next","complete","scrollToTop","updateApp","activateUpdate","then","document","location","reload","ɵɵdirectiveInject","i1","Store","i2","Router","i3","SwUpdate","selectors","hostBindings","AppComponent_HostBindings","rf","ctx","$event","ɵɵresolveWindow","ɵɵelementStart","ɵɵtemplate","AppComponent_app_loading_spinner_4_Template","ɵɵelementEnd","ɵɵlistener","AppComponent_Template_button_click_7_listener","ɵɵtext","ɵɵadvance","ɵɵpipeBind1","ɵɵclassProp"],"sources":["/Users/stephanelkhoury/Documents/GitHub/Angular-masterclass/25-Ecommerce-Project/code-examples/angular-ecommerce/src/app/app.component.ts","/Users/stephanelkhoury/Documents/GitHub/Angular-masterclass/25-Ecommerce-Project/code-examples/angular-ecommerce/src/app/app.component.html"],"sourcesContent":["import { Component, OnInit, HostListener, OnDestroy } from '@angular/core';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { filter, takeUntil } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { Observable, Subject } from 'rxjs';\nimport { SwUpdate } from '@angular/service-worker';\n\nimport { AppState } from './store';\nimport { checkAuthStatus, logout } from './store/actions/auth.actions';\nimport { selectIsLoading } from './store/selectors/ui.selectors';\nimport { selectIsAuthenticated, selectCurrentUser } from './store/selectors/auth.selectors';\nimport { selectCartItemCount } from './store/selectors/cart.selectors';\nimport { User } from './core/models/user.model';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit, OnDestroy {\n  isLoading$: Observable<boolean>;\n  isAuthenticated$: Observable<boolean>;\n  currentUser$: Observable<User | null>;\n  cartItemCount$: Observable<number>;\n  updateAvailable = false;\n  showBackToTop = false;\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private store: Store<AppState>,\n    private router: Router,\n    private swUpdate: SwUpdate\n  ) {\n    this.isLoading$ = this.store.select(selectIsLoading);\n    this.isAuthenticated$ = this.store.select(selectIsAuthenticated);\n    this.currentUser$ = this.store.select(selectCurrentUser);\n    this.cartItemCount$ = this.store.select(selectCartItemCount);\n  }\n\n  @HostListener('window:scroll', ['$event'])\n  onWindowScroll(): void {\n    this.showBackToTop = window.pageYOffset > 300;\n  }\n\n  ngOnInit(): void {\n    // Check authentication status on app load\n    this.store.dispatch(checkAuthStatus());\n    \n    // Handle route changes with smooth scrolling\n    this.router.events\n      .pipe(\n        filter(event => event instanceof NavigationEnd),\n        takeUntil(this.destroy$)\n      )\n      .subscribe(() => {\n        window.scrollTo({ top: 0, behavior: 'smooth' });\n      });\n    \n    // Subscribe to service worker updates\n    if (this.swUpdate.isEnabled) {\n      this.swUpdate.versionUpdates.subscribe(() => {\n        this.updateAvailable = true;\n      });\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  scrollToTop(): void {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }\n\n  updateApp(): void {\n    if (this.swUpdate.isEnabled) {\n      this.swUpdate.activateUpdate().then(() => {\n        document.location.reload();\n      });\n    }\n  }\n\n  logout(): void {\n    this.store.dispatch(logout());\n  }\n}\n","<!-- Modern Header Component -->\n<app-header></app-header>\n\n<!-- Main Application Layout -->\n<div class=\"app-layout\">\n  <!-- Content Area -->\n  <main class=\"main-content\" role=\"main\">\n    <!-- Router outlet for dynamic content -->\n    <router-outlet></router-outlet>\n    \n    <!-- Loading overlay for app-wide operations -->\n    <app-loading-spinner *ngIf=\"isLoading$ | async\" [overlay]=\"true\"></app-loading-spinner>\n  </main>\n</div>\n\n<!-- Modern Footer Component -->\n<app-footer></app-footer>\n\n<!-- Back to top button -->\n<button \n  class=\"back-to-top\" \n  [class.visible]=\"showBackToTop\"\n  (click)=\"scrollToTop()\"\n  aria-label=\"Back to top\"\n  mat-fab\n  color=\"primary\">\n  <mat-icon>keyboard_arrow_up</mat-icon>\n</button>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}