{"ast":null,"code":"import { of } from 'rxjs';\nimport { map, switchMap, tap, catchError } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../../core/services/product.service\";\nimport * as i4 from \"../../../core/services/cart.service\";\nimport * as i5 from \"../../../core/services/notification.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"@angular/material/divider\";\nimport * as i10 from \"../../../shared/components/loading-spinner/loading-spinner.component\";\nimport * as i11 from \"../../../shared/components/product-card/product-card.component\";\nimport * as i12 from \"../../../shared/components/star-rating/star-rating.component\";\nimport * as i13 from \"../../../shared/components/not-found/not-found.component\";\nimport * as i14 from \"../components/product-reviews/product-reviews.component\";\nimport * as i15 from \"../components/add-review/add-review.component\";\nimport * as i16 from \"../../../shared/pipes/price.pipe\";\nfunction ProductDetailComponent_app_loading_spinner_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loading-spinner\", 7);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"overlay\", true);\n  }\n}\nfunction ProductDetailComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"error_outline\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_8_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.goBack());\n    });\n    i0.ɵɵtext(6, \"Go Back\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nfunction ProductDetailComponent_ng_container_9_ng_container_8_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_ng_container_9_ng_container_8_div_1_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const image_r17 = restoredCtx.$implicit;\n      const ctx_r18 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r18.updateSelectedImage(image_r17));\n    });\n    i0.ɵɵelement(1, \"img\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const image_r17 = ctx.$implicit;\n    const product_r7 = i0.ɵɵnextContext(2).ngIf;\n    const ctx_r16 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", ctx_r16.selectedImage === image_r17);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", image_r17, i0.ɵɵsanitizeUrl)(\"alt\", product_r7.name + \" additional image\");\n  }\n}\nfunction ProductDetailComponent_ng_container_9_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ProductDetailComponent_ng_container_9_ng_container_8_div_1_Template, 2, 4, \"div\", 50);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const product_r7 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", product_r7.additionalImages);\n  }\n}\nfunction ProductDetailComponent_ng_container_9_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 51);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"price\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r7 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, product_r7.regularPrice), \" \");\n  }\n}\nfunction ProductDetailComponent_ng_container_9_span_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 52);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r7 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, (product_r7.regularPrice - product_r7.price) / product_r7.regularPrice * 100, \"1.0-0\"), \"% OFF \");\n  }\n}\nfunction ProductDetailComponent_ng_container_9_span_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 53);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r7 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (Only \", product_r7.stockQuantity, \" left) \");\n  }\n}\nfunction ProductDetailComponent_ng_container_9_div_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"span\", 38);\n    i0.ɵɵtext(2, \"Weight\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 39);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r7 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(product_r7.specifications.weight || \"N/A\");\n  }\n}\nfunction ProductDetailComponent_ng_container_9_div_63_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"span\", 38);\n    i0.ɵɵtext(2, \"Dimensions\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 39);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r7 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(product_r7.specifications.dimensions || \"N/A\");\n  }\n}\nfunction ProductDetailComponent_ng_container_9_mat_tab_70_tr_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"titlecase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const spec_r28 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 2, spec_r28.key));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(spec_r28.value);\n  }\n}\nfunction ProductDetailComponent_ng_container_9_mat_tab_70_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-tab\", 54)(1, \"div\", 43)(2, \"h3\");\n    i0.ɵɵtext(3, \"Product Specifications\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"table\", 55);\n    i0.ɵɵtemplate(5, ProductDetailComponent_ng_container_9_mat_tab_70_tr_5_Template, 6, 4, \"tr\", 56);\n    i0.ɵɵpipe(6, \"keyvalue\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const product_r7 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(6, 1, product_r7.specifications));\n  }\n}\nfunction ProductDetailComponent_ng_container_9_section_79_app_product_card_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-product-card\", 60);\n    i0.ɵɵlistener(\"addToCart\", function ProductDetailComponent_ng_container_9_section_79_app_product_card_4_Template_app_product_card_addToCart_0_listener($event) {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r32 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r32.addToCart($event));\n    })(\"addToWishlist\", function ProductDetailComponent_ng_container_9_section_79_app_product_card_4_Template_app_product_card_addToWishlist_0_listener($event) {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r34 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r34.addToWishlist($event));\n    })(\"viewDetails\", function ProductDetailComponent_ng_container_9_section_79_app_product_card_4_Template_app_product_card_viewDetails_0_listener() {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r35 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r35.updateSelectedImage(null));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const relatedProduct_r31 = ctx.$implicit;\n    i0.ɵɵproperty(\"product\", relatedProduct_r31);\n  }\n}\nfunction ProductDetailComponent_ng_container_9_section_79_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\", 57)(1, \"h2\");\n    i0.ɵɵtext(2, \"Related Products\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 58);\n    i0.ɵɵtemplate(4, ProductDetailComponent_ng_container_9_section_79_app_product_card_4_Template, 1, 1, \"app-product-card\", 59);\n    i0.ɵɵpipe(5, \"async\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(5, 1, ctx_r15.relatedProducts$));\n  }\n}\nfunction ProductDetailComponent_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r37 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 10)(2, \"div\", 11)(3, \"div\", 12);\n    i0.ɵɵelement(4, \"img\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 14)(6, \"div\", 15);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_ng_container_9_Template_div_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r37);\n      const product_r7 = restoredCtx.ngIf;\n      const ctx_r36 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r36.updateSelectedImage(product_r7.imageUrl));\n    });\n    i0.ɵɵelement(7, \"img\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, ProductDetailComponent_ng_container_9_ng_container_8_Template, 2, 1, \"ng-container\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 17)(10, \"div\", 18);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"h1\", 19);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 20);\n    i0.ɵɵelement(15, \"app-star-rating\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 22)(17, \"span\", 23);\n    i0.ɵɵtext(18);\n    i0.ɵɵpipe(19, \"price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(20, ProductDetailComponent_ng_container_9_span_20_Template, 3, 3, \"span\", 24);\n    i0.ɵɵtemplate(21, ProductDetailComponent_ng_container_9_span_21_Template, 3, 4, \"span\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 26)(23, \"mat-icon\");\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"span\");\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(27, ProductDetailComponent_ng_container_9_span_27_Template, 2, 1, \"span\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"p\", 28);\n    i0.ɵɵtext(29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"div\", 29)(31, \"div\", 30)(32, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_ng_container_9_Template_button_click_32_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const ctx_r38 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r38.decrementQuantity());\n    });\n    i0.ɵɵelementStart(33, \"mat-icon\");\n    i0.ɵɵtext(34, \"remove\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(35, \"span\");\n    i0.ɵɵtext(36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_ng_container_9_Template_button_click_37_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const ctx_r39 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r39.incrementQuantity());\n    });\n    i0.ɵɵelementStart(38, \"mat-icon\");\n    i0.ɵɵtext(39, \"add\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(40, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_ng_container_9_Template_button_click_40_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r37);\n      const product_r7 = restoredCtx.ngIf;\n      const ctx_r40 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r40.addToCart(product_r7));\n    });\n    i0.ɵɵelementStart(41, \"mat-icon\");\n    i0.ɵɵtext(42, \"shopping_cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(43, \" Add to Cart \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_ng_container_9_Template_button_click_44_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r37);\n      const product_r7 = restoredCtx.ngIf;\n      const ctx_r41 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r41.addToWishlist(product_r7));\n    });\n    i0.ɵɵelementStart(45, \"mat-icon\");\n    i0.ɵɵtext(46, \"favorite_border\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(47, \"mat-divider\");\n    i0.ɵɵelementStart(48, \"div\", 35)(49, \"h3\");\n    i0.ɵɵtext(50, \"Product Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(51, \"div\", 36)(52, \"div\", 37)(53, \"span\", 38);\n    i0.ɵɵtext(54, \"SKU\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(55, \"span\", 39);\n    i0.ɵɵtext(56);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(57, \"div\", 37)(58, \"span\", 38);\n    i0.ɵɵtext(59, \"Brand\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(60, \"span\", 39);\n    i0.ɵɵtext(61);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(62, ProductDetailComponent_ng_container_9_div_62_Template, 5, 1, \"div\", 40);\n    i0.ɵɵtemplate(63, ProductDetailComponent_ng_container_9_div_63_Template, 5, 1, \"div\", 40);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(64, \"mat-tab-group\", 41)(65, \"mat-tab\", 42)(66, \"div\", 43)(67, \"h3\");\n    i0.ɵɵtext(68, \"Product Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(69, \"div\", 44);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(70, ProductDetailComponent_ng_container_9_mat_tab_70_Template, 7, 3, \"mat-tab\", 45);\n    i0.ɵɵelementStart(71, \"mat-tab\", 46)(72, \"div\", 43)(73, \"h3\");\n    i0.ɵɵtext(74, \"Customer Reviews\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(75, \"app-product-reviews\", 47);\n    i0.ɵɵelementStart(76, \"h4\");\n    i0.ɵɵtext(77, \"Add a Review\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(78, \"app-add-review\", 48);\n    i0.ɵɵlistener(\"reviewSubmitted\", function ProductDetailComponent_ng_container_9_Template_app_add_review_reviewSubmitted_78_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r37);\n      const product_r7 = restoredCtx.ngIf;\n      const ctx_r42 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r42.submitReview(product_r7, $event));\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(79, ProductDetailComponent_ng_container_9_section_79_Template, 6, 3, \"section\", 49);\n    i0.ɵɵpipe(80, \"async\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const product_r7 = ctx.ngIf;\n    const ctx_r2 = i0.ɵɵnextContext();\n    let tmp_30_0;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", ctx_r2.selectedImage || product_r7.imageUrl, i0.ɵɵsanitizeUrl)(\"alt\", product_r7.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"active\", ctx_r2.selectedImage === product_r7.imageUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", product_r7.imageUrl, i0.ɵɵsanitizeUrl)(\"alt\", product_r7.name + \" main image\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", product_r7.additionalImages && product_r7.additionalImages.length > 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r7.category.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r7.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"rating\", product_r7.rating)(\"reviewCount\", (product_r7.reviews == null ? null : product_r7.reviews.length) || 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(19, 33, product_r7.price));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", product_r7.regularPrice && product_r7.regularPrice > product_r7.price);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", product_r7.regularPrice && product_r7.regularPrice > product_r7.price);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"out-of-stock\", product_r7.stockQuantity === 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r7.stockQuantity > 0 ? \"check_circle\" : \"cancel\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r7.stockQuantity > 0 ? \"In Stock\" : \"Out of Stock\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", product_r7.stockQuantity > 0 && product_r7.stockQuantity < 10);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r7.description);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r2.quantity <= 1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.quantity);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", product_r7.stockQuantity === 0);\n    i0.ɵɵadvance(16);\n    i0.ɵɵtextInterpolate(product_r7.sku || \"N/A\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(product_r7.brand || \"N/A\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", product_r7.specifications);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", product_r7.specifications);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"innerHTML\", product_r7.longDescription || product_r7.description, i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", product_r7.specifications);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"label\", \"Reviews (\", (product_r7.reviews == null ? null : product_r7.reviews.length) || 0, \")\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"reviews\", product_r7.reviews);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"productId\", product_r7.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_30_0 = i0.ɵɵpipeBind1(80, 35, ctx_r2.relatedProducts$)) == null ? null : tmp_30_0.length);\n  }\n}\nfunction ProductDetailComponent_ng_template_11_app_not_found_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-not-found\");\n  }\n}\nfunction ProductDetailComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ProductDetailComponent_ng_template_11_app_not_found_0_Template, 1, 0, \"app-not-found\", 16);\n    i0.ɵɵpipe(1, \"async\");\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(1, 1, ctx_r4.loading$) && !ctx_r4.error);\n  }\n}\nlet ProductDetailComponent = /*#__PURE__*/(() => {\n  class ProductDetailComponent {\n    constructor(store, route, router, productService, cartService, notificationService) {\n      this.store = store;\n      this.route = route;\n      this.router = router;\n      this.productService = productService;\n      this.cartService = cartService;\n      this.notificationService = notificationService;\n      this.error = null;\n      this.selectedImage = null;\n      this.quantity = 1;\n      this.loading$ = this.store.select(state => state.ui.loading);\n      // Get product from store based on route param\n      this.product$ = this.route.paramMap.pipe(map(params => params.get('id')), switchMap(id => {\n        if (!id) {\n          return of(null);\n        }\n        return this.store.select(state => state.products.items.find(product => product.id === id)).pipe(tap(product => {\n          if (!product) {\n            // If product not in store, load it\n            this.productService.loadProductById(id);\n          } else {\n            // Set selected image\n            this.selectedImage = product.imageUrl;\n          }\n        }));\n      }), catchError(err => {\n        this.error = 'Failed to load product details';\n        return of(null);\n      }));\n      // Get related products\n      this.relatedProducts$ = this.product$.pipe(switchMap(product => {\n        if (!product) {\n          return of([]);\n        }\n        return this.store.select(state => state.products.items.filter(p => p.category.id === product.category.id && p.id !== product.id).slice(0, 4));\n      }));\n    }\n    ngOnInit() {\n      // Ensure all products are loaded\n      this.productService.loadProducts();\n    }\n    updateSelectedImage(imageUrl) {\n      this.selectedImage = imageUrl;\n    }\n    incrementQuantity() {\n      this.quantity++;\n    }\n    decrementQuantity() {\n      if (this.quantity > 1) {\n        this.quantity--;\n      }\n    }\n    addToCart(product) {\n      this.cartService.addToCart(product, this.quantity);\n      this.notificationService.show(`${product.name} added to cart`);\n    }\n    addToWishlist(product) {\n      // This would dispatch the appropriate action for the wishlist\n      this.notificationService.show(`${product.name} added to wishlist`);\n    }\n    submitReview(product, review) {\n      this.productService.addProductReview(product.id, review);\n      this.notificationService.show('Thank you for your review!');\n    }\n    goBack() {\n      this.router.navigate(['/products']);\n    }\n    static {\n      this.ɵfac = function ProductDetailComponent_Factory(t) {\n        return new (t || ProductDetailComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ProductService), i0.ɵɵdirectiveInject(i4.CartService), i0.ɵɵdirectiveInject(i5.NotificationService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ProductDetailComponent,\n        selectors: [[\"app-product-detail\"]],\n        decls: 13,\n        vars: 8,\n        consts: [[1, \"product-detail-page\"], [3, \"overlay\", 4, \"ngIf\"], [1, \"container\"], [\"mat-stroked-button\", \"\", 1, \"back-button\", 3, \"click\"], [\"class\", \"error-message\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"notFound\", \"\"], [3, \"overlay\"], [1, \"error-message\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"product-detail\"], [1, \"product-images\"], [1, \"main-image\"], [3, \"src\", \"alt\"], [1, \"image-gallery\"], [1, \"image-thumbnail\", 3, \"click\"], [4, \"ngIf\"], [1, \"product-info\"], [1, \"product-category\"], [1, \"product-name\"], [1, \"product-rating\"], [3, \"rating\", \"reviewCount\"], [1, \"product-price\"], [1, \"current-price\"], [\"class\", \"regular-price\", 4, \"ngIf\"], [\"class\", \"discount-badge\", 4, \"ngIf\"], [1, \"product-availability\"], [\"class\", \"low-stock\", 4, \"ngIf\"], [1, \"product-description\"], [1, \"product-actions\"], [1, \"quantity-selector\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"add-to-cart-btn\", 3, \"disabled\", \"click\"], [\"mat-icon-button\", \"\", 1, \"wishlist-btn\", 3, \"click\"], [1, \"product-details\"], [1, \"details-grid\"], [1, \"detail-item\"], [1, \"detail-label\"], [1, \"detail-value\"], [\"class\", \"detail-item\", 4, \"ngIf\"], [1, \"product-tabs\"], [\"label\", \"Description\"], [1, \"tab-content\"], [3, \"innerHTML\"], [\"label\", \"Specifications\", 4, \"ngIf\"], [3, \"label\"], [3, \"reviews\"], [3, \"productId\", \"reviewSubmitted\"], [\"class\", \"related-products\", 4, \"ngIf\"], [\"class\", \"image-thumbnail\", 3, \"active\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"regular-price\"], [1, \"discount-badge\"], [1, \"low-stock\"], [\"label\", \"Specifications\"], [1, \"specs-table\"], [4, \"ngFor\", \"ngForOf\"], [1, \"related-products\"], [1, \"related-grid\"], [3, \"product\", \"addToCart\", \"addToWishlist\", \"viewDetails\", 4, \"ngFor\", \"ngForOf\"], [3, \"product\", \"addToCart\", \"addToWishlist\", \"viewDetails\"]],\n        template: function ProductDetailComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0);\n            i0.ɵɵtemplate(1, ProductDetailComponent_app_loading_spinner_1_Template, 1, 1, \"app-loading-spinner\", 1);\n            i0.ɵɵpipe(2, \"async\");\n            i0.ɵɵelementStart(3, \"div\", 2)(4, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function ProductDetailComponent_Template_button_click_4_listener() {\n              return ctx.goBack();\n            });\n            i0.ɵɵelementStart(5, \"mat-icon\");\n            i0.ɵɵtext(6, \"arrow_back\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(7, \" Back to Products \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(8, ProductDetailComponent_div_8_Template, 7, 1, \"div\", 4);\n            i0.ɵɵtemplate(9, ProductDetailComponent_ng_container_9_Template, 81, 37, \"ng-container\", 5);\n            i0.ɵɵpipe(10, \"async\");\n            i0.ɵɵtemplate(11, ProductDetailComponent_ng_template_11_Template, 2, 3, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            const _r3 = i0.ɵɵreference(12);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 4, ctx.loading$));\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(10, 6, ctx.product$))(\"ngIfElse\", _r3);\n          }\n        },\n        dependencies: [i6.NgForOf, i6.NgIf, i7.MatButton, i7.MatIconButton, i8.MatIcon, i9.MatDivider, i10.LoadingSpinnerComponent, i11.ProductCardComponent, i12.StarRatingComponent, i13.NotFoundComponent, i14.ProductReviewsComponent, i15.AddReviewComponent, i6.AsyncPipe, i6.DecimalPipe, i6.TitleCasePipe, i6.KeyValuePipe, i16.PricePipe],\n        styles: [\".product-detail-page[_ngcontent-%COMP%]{padding:24px 0}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 16px}.back-button[_ngcontent-%COMP%]{margin-bottom:24px}.back-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.error-message[_ngcontent-%COMP%]{background-color:#ffebee;border-radius:8px;padding:24px;text-align:center;margin-bottom:32px}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;color:#f44336;margin-bottom:16px}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#c62828;margin-bottom:16px}.error-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:16px}.product-detail[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:32px;margin-bottom:48px}.product-images[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;overflow:hidden;margin-bottom:16px;height:400px;display:flex;align-items:center;justify-content:center}.product-images[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.product-images[_ngcontent-%COMP%]   .image-gallery[_ngcontent-%COMP%]{display:flex;gap:8px}.product-images[_ngcontent-%COMP%]   .image-gallery[_ngcontent-%COMP%]   .image-thumbnail[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:4px;overflow:hidden;cursor:pointer;border:2px solid transparent}.product-images[_ngcontent-%COMP%]   .image-gallery[_ngcontent-%COMP%]   .image-thumbnail.active[_ngcontent-%COMP%]{border-color:#3f51b5}.product-images[_ngcontent-%COMP%]   .image-gallery[_ngcontent-%COMP%]   .image-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-info[_ngcontent-%COMP%]   .product-category[_ngcontent-%COMP%]{color:#757575;font-size:14px;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}.product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:32px;font-weight:600;color:#212121;margin:0 0 16px}.product-info[_ngcontent-%COMP%]   .product-rating[_ngcontent-%COMP%]{margin-bottom:16px}.product-info[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px}.product-info[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]   .current-price[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#3f51b5}.product-info[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]   .regular-price[_ngcontent-%COMP%]{font-size:16px;color:#757575;text-decoration:line-through;margin-left:12px}.product-info[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]   .discount-badge[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600;margin-left:12px}.product-info[_ngcontent-%COMP%]   .product-availability[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;color:#388e3c}.product-info[_ngcontent-%COMP%]   .product-availability.out-of-stock[_ngcontent-%COMP%]{color:#d32f2f}.product-info[_ngcontent-%COMP%]   .product-availability[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.product-info[_ngcontent-%COMP%]   .product-availability[_ngcontent-%COMP%]   .low-stock[_ngcontent-%COMP%]{margin-left:8px;color:#f57c00}.product-info[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{margin-bottom:24px;color:#424242;line-height:1.6}.product-info[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:24px}.product-info[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .quantity-selector[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:16px;border:1px solid #e0e0e0;border-radius:4px}.product-info[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .quantity-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:36px;width:36px;line-height:36px}.product-info[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .quantity-selector[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;min-width:40px;text-align:center;font-weight:500}.product-info[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]{padding:0 24px}.product-info[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.product-info[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .wishlist-btn[_ngcontent-%COMP%]{margin-left:16px}.product-info[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin:24px 0}.product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin-bottom:16px}.product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:12px;color:#757575;margin-bottom:4px}.product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-weight:500}.product-tabs[_ngcontent-%COMP%]{margin-bottom:48px}.product-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:24px}.product-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:500;margin-bottom:16px}.product-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin:32px 0 16px}.product-tabs[_ngcontent-%COMP%]   .specs-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.product-tabs[_ngcontent-%COMP%]   .specs-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0}.product-tabs[_ngcontent-%COMP%]   .specs-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.product-tabs[_ngcontent-%COMP%]   .specs-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .product-tabs[_ngcontent-%COMP%]   .specs-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left}.product-tabs[_ngcontent-%COMP%]   .specs-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:30%;color:#616161;font-weight:500}.product-tabs[_ngcontent-%COMP%]   .specs-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#212121}.related-products[_ngcontent-%COMP%]{margin-bottom:48px}.related-products[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-bottom:24px;position:relative}.related-products[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:\\\"\\\";display:block;width:60px;height:3px;background-color:#3f51b5;margin-top:8px}.related-products[_ngcontent-%COMP%]   .related-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:24px}@media (max-width: 992px){.related-products[_ngcontent-%COMP%]   .related-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.product-detail[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:24px}.product-images[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]{height:300px}.related-products[_ngcontent-%COMP%]   .related-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:16px}}@media (max-width: 576px){.product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:24px}.product-info[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.product-info[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .quantity-selector[_ngcontent-%COMP%]{width:100%;margin-right:0;margin-bottom:16px;justify-content:center}.product-info[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]{flex-grow:1}.related-products[_ngcontent-%COMP%]   .related-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}\"]\n      });\n    }\n  }\n  return ProductDetailComponent;\n})();\nexport { ProductDetailComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}