{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport { filter, takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { checkAuthStatus, logout } from './store/actions/auth.actions';\nimport { selectIsLoading } from './store/selectors/ui.selectors';\nimport { selectIsAuthenticated, selectCurrentUser } from './store/selectors/auth.selectors';\nimport { selectCartItemCount } from './store/selectors/cart.selectors';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/service-worker\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"./shared/components/header/header.component\";\nimport * as i8 from \"./shared/components/footer/footer.component\";\nimport * as i9 from \"./shared/components/loading-spinner/loading-spinner.component\";\nfunction AppComponent_app_loading_spinner_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loading-spinner\", 4);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"overlay\", true);\n  }\n}\nlet AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(store, router, swUpdate) {\n      this.store = store;\n      this.router = router;\n      this.swUpdate = swUpdate;\n      this.updateAvailable = false;\n      this.showBackToTop = false;\n      this.destroy$ = new Subject();\n      this.isLoading$ = this.store.select(selectIsLoading);\n      this.isAuthenticated$ = this.store.select(selectIsAuthenticated);\n      this.currentUser$ = this.store.select(selectCurrentUser);\n      this.cartItemCount$ = this.store.select(selectCartItemCount);\n    }\n    onWindowScroll() {\n      this.showBackToTop = window.pageYOffset > 300;\n    }\n    ngOnInit() {\n      // Check authentication status on app load\n      this.store.dispatch(checkAuthStatus());\n      // Handle route changes with smooth scrolling\n      this.router.events.pipe(filter(event => event instanceof NavigationEnd), takeUntil(this.destroy$)).subscribe(() => {\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth'\n        });\n      });\n      // Subscribe to service worker updates\n      if (this.swUpdate.isEnabled) {\n        this.swUpdate.versionUpdates.subscribe(() => {\n          this.updateAvailable = true;\n        });\n      }\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    scrollToTop() {\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    }\n    updateApp() {\n      if (this.swUpdate.isEnabled) {\n        this.swUpdate.activateUpdate().then(() => {\n          document.location.reload();\n        });\n      }\n    }\n    logout() {\n      this.store.dispatch(logout());\n    }\n    static {\n      this.ɵfac = function AppComponent_Factory(t) {\n        return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.SwUpdate));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AppComponent,\n        selectors: [[\"app-root\"]],\n        hostBindings: function AppComponent_HostBindings(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵlistener(\"scroll\", function AppComponent_scroll_HostBindingHandler($event) {\n              return ctx.onWindowScroll($event);\n            }, false, i0.ɵɵresolveWindow);\n          }\n        },\n        decls: 10,\n        vars: 5,\n        consts: [[1, \"app-layout\"], [\"role\", \"main\", 1, \"main-content\"], [3, \"overlay\", 4, \"ngIf\"], [\"aria-label\", \"Back to top\", \"mat-fab\", \"\", \"color\", \"primary\", 1, \"back-to-top\", 3, \"click\"], [3, \"overlay\"]],\n        template: function AppComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelement(0, \"app-header\");\n            i0.ɵɵelementStart(1, \"div\", 0)(2, \"main\", 1);\n            i0.ɵɵelement(3, \"router-outlet\");\n            i0.ɵɵtemplate(4, AppComponent_app_loading_spinner_4_Template, 1, 1, \"app-loading-spinner\", 2);\n            i0.ɵɵpipe(5, \"async\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(6, \"app-footer\");\n            i0.ɵɵelementStart(7, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_7_listener() {\n              return ctx.scrollToTop();\n            });\n            i0.ɵɵelementStart(8, \"mat-icon\");\n            i0.ɵɵtext(9, \"keyboard_arrow_up\");\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(5, 3, ctx.isLoading$));\n            i0.ɵɵadvance(3);\n            i0.ɵɵclassProp(\"visible\", ctx.showBackToTop);\n          }\n        },\n        dependencies: [i4.NgIf, i2.RouterOutlet, i5.MatFabButton, i6.MatIcon, i7.HeaderComponent, i8.FooterComponent, i9.LoadingSpinnerComponent, i4.AsyncPipe],\n        styles: [\".app-layout[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;background:var(--bg-primary)}.main-content[_ngcontent-%COMP%]{flex:1;position:relative;overflow-x:hidden}.back-to-top[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;z-index:var(--z-fixed);width:56px;height:56px;background:var(--primary-color);border:none;border-radius:50%;color:#fff;cursor:pointer;box-shadow:var(--shadow-lg);transition:all var(--transition-normal);opacity:0;visibility:hidden}.back-to-top.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible}.back-to-top[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-xl);background:var(--primary-dark)}.back-to-top[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.5rem}.global-loading[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,.9);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:var(--z-modal)}.global-loading[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid var(--gray-200);border-top-color:var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:var(--spacing-lg)}.global-loading[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:500}.notifications-container[_ngcontent-%COMP%]{position:fixed;top:var(--spacing-lg);right:var(--spacing-lg);z-index:var(--z-toast);max-width:400px}@media (max-width: 768px){.notifications-container[_ngcontent-%COMP%]{top:var(--spacing-md);right:var(--spacing-md);left:var(--spacing-md);max-width:none}}.router-outlet-container[_ngcontent-%COMP%]{position:relative;overflow:hidden}.page-transition[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pageSlideIn .4s ease-out}@keyframes _ngcontent-%COMP%_pageSlideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.app-layout[_ngcontent-%COMP%]{font-size:.9rem}}\"]\n      });\n    }\n  }\n  return AppComponent;\n})();\nexport { AppComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}