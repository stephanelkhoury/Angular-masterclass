{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\nimport * as CartActions from '../../../store/actions/cart.actions'; // Import CartActions\nimport { of } from 'rxjs'; // Import Observable and of for isInWishlist$\nlet ProductCardComponent = class ProductCardComponent {\n  constructor(store,\n  // Inject Store\n  wishlistService,\n  // Inject WishlistService\n  cdr) {\n    this.store = store;\n    this.wishlistService = wishlistService;\n    this.cdr = cdr;\n    this.currencySymbol = '$';\n    this.newThresholdDays = 7; // Days to consider a product \"new\"\n    // Configuration for what to show\n    this.showNewBadge = true;\n    this.showFeaturedBadge = true;\n    this.showBestsellerBadge = true;\n    this.showSoldOutBadge = true;\n    this.showImageHoverControls = true;\n    this.showImageIndicators = true;\n    this.showStockIndicator = true;\n    this.showRating = true;\n    this.showShortDescription = false;\n    this.showKeyFeatures = false;\n    this.showShippingInfo = false;\n    this.cycleImagesOnHover = true;\n    // New Inputs for layout and specific button visibility\n    this.size = 'medium';\n    this.showBuyNowButton = true;\n    this.showQuantityControl = true; // For controlling the +/- quantity input\n    this.layout = 'vertical';\n    // Event Emitters - Renamed to avoid conflict with method names\n    this.productAddedToCart = new EventEmitter();\n    this.productAddedToWishlist = new EventEmitter();\n    this.productCompared = new EventEmitter();\n    this.productViewed = new EventEmitter(); // For quick view\n    this.productBoughtNow = new EventEmitter();\n    this.isNew = false;\n    this.isBestSeller = false;\n    this.isLowStock = false;\n    this.discountPercentage = null;\n    this.discountAmount = null;\n    this.currentImageIndex = 0;\n    this.addingToCart = false;\n    this.addingToWishlistState = false; // Renamed to avoid conflict\n    this.uiShowQuantitySelector = false; // Renamed to avoid conflict\n    this.selectedQuantity = 1;\n    this.isInWishlist$ = of(false); // Default to false\n    this.isInCompare$ = of(false); // Placeholder for compare feature\n  }\n\n  ngOnInit() {\n    this.updateProductFlags();\n    this.calculateDiscount();\n    if (this.product && this.product.id) {\n      // Ensure product and product.id exist\n      this.isInWishlist$ = this.wishlistService.isInWishlist(this.product.id);\n      // this.isInCompare$ = this.compareService.isInCompare(this.product.id); // If you have a compare service\n    }\n  }\n\n  ngOnChanges(changes) {\n    if (changes['product'] && this.product && this.product.id) {\n      // Ensure product and product.id exist\n      this.updateProductFlags();\n      this.calculateDiscount();\n      this.selectedQuantity = 1; // Reset quantity when product changes\n      this.uiShowQuantitySelector = false;\n      this.isInWishlist$ = this.wishlistService.isInWishlist(this.product.id);\n      // this.isInCompare$ = this.compareService.isInCompare(this.product.id);\n      this.cdr.markForCheck();\n    }\n  }\n  updateProductFlags() {\n    if (!this.product) return;\n    const now = new Date();\n    const productDate = this.product.createdAt ? new Date(this.product.createdAt) : now;\n    const diffTime = Math.abs(now.getTime() - productDate.getTime());\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    this.isNew = diffDays <= (this.newThresholdDays || 7);\n    this.isBestSeller = !!this.product.featured || (this.product.rating || 0) >= 4.5 && (this.product.reviews?.length || 0) >= 50; // Adjusted review count\n    this.isLowStock = (this.product.stockQuantity || 0) > 0 && (this.product.stockQuantity || 0) <= 10;\n  }\n  calculateDiscount() {\n    if (!this.product) {\n      this.discountPercentage = null;\n      this.discountAmount = null;\n      return;\n    }\n    if (this.product.regularPrice && this.product.regularPrice > this.product.price) {\n      this.discountPercentage = Math.round((this.product.regularPrice - this.product.price) / this.product.regularPrice * 100);\n      this.discountAmount = this.product.regularPrice - this.product.price;\n    } else {\n      this.discountPercentage = null;\n      this.discountAmount = null;\n    }\n  }\n  // Mouse enter/leave handlers for image cycling\n  onMouseEnter() {\n    if (this.cycleImagesOnHover) {\n      this.startImageCycle();\n    }\n  }\n  onMouseLeave() {\n    if (this.cycleImagesOnHover) {\n      this.stopImageCycle();\n    }\n  }\n  startImageCycle() {\n    if (this.cycleImagesOnHover && this.product?.images && this.product.images.length > 1) {\n      this.stopImageCycle(); // Clear existing interval\n      this.imageChangeInterval = setInterval(() => {\n        if (this.product.images && this.product.images.length > 1) {\n          this.currentImageIndex = (this.currentImageIndex + 1) % this.product.images.length;\n          this.cdr.markForCheck(); // Trigger change detection\n        }\n      }, 2000); // Change image every 2 seconds\n    }\n  }\n\n  stopImageCycle() {\n    if (this.imageChangeInterval) {\n      clearInterval(this.imageChangeInterval);\n      this.imageChangeInterval = null;\n    }\n  }\n  // Image navigation\n  prevImage(event) {\n    event.stopPropagation();\n    if (this.product?.images && this.product.images.length > 0) {\n      this.currentImageIndex = (this.currentImageIndex - 1 + this.product.images.length) % this.product.images.length;\n    }\n  }\n  nextImage(event) {\n    event.stopPropagation();\n    if (this.product?.images && this.product.images.length > 0) {\n      this.currentImageIndex = (this.currentImageIndex + 1) % this.product.images.length;\n    }\n  }\n  setImage(index, event) {\n    event.stopPropagation();\n    this.currentImageIndex = index;\n  }\n  onImageError(event) {\n    const imgElement = event.target;\n    imgElement.src = 'assets/images/placeholder.png'; // Fallback image\n  }\n  // Action Methods\n  addToCartHandler(event) {\n    event.stopPropagation();\n    if (!this.product || (this.product.stockQuantity || 0) === 0 || this.addingToCart) return;\n    this.addingToCart = true;\n    const cartItem = {\n      productId: this.product.id,\n      quantity: this.selectedQuantity,\n      name: this.product.name,\n      price: this.product.discountPrice || this.product.price,\n      unitPrice: this.product.discountPrice || this.product.price,\n      image: this.product.imageUrl || this.product.images && this.product.images[0]?.url || ''\n    };\n    // Simulate API call\n    setTimeout(() => {\n      this.store.dispatch(CartActions.addToCart({\n        item: cartItem\n      }));\n      this.productAddedToCart.emit({\n        product: this.product,\n        quantity: this.selectedQuantity\n      });\n      this.addingToCart = false;\n      this.uiShowQuantitySelector = false; // Hide quantity selector after adding\n      this.selectedQuantity = 1; // Reset quantity\n      this.cdr.markForCheck();\n    }, 500);\n  }\n  addToWishlistHandler(event) {\n    event.stopPropagation();\n    if (!this.product || this.addingToWishlistState) return;\n    this.addingToWishlistState = true;\n    // Assuming WishlistService has a method like toggleWishlistItem or add/remove\n    // For now, let's assume toggleWishlist exists and works as intended.\n    // If toggleWishlist is not the correct method, this needs to be adjusted based on WishlistService's API.\n    this.wishlistService.toggleWishlist(this.product.id).subscribe(() => {\n      this.productAddedToWishlist.emit(this.product);\n      this.addingToWishlistState = false;\n      if (this.product && this.product.id) {\n        // Re-check after ensuring product.id exists\n        this.isInWishlist$ = this.wishlistService.isInWishlist(this.product.id);\n      }\n      this.cdr.markForCheck();\n    });\n  }\n  compareProductHandler(event) {\n    event.stopPropagation();\n    if (!this.product) return;\n    this.productCompared.emit(this.product);\n    // Add logic for compare service if available\n    // this.isInCompare$ = this.compareService.toggleCompare(this.product.id);\n    this.cdr.markForCheck();\n  }\n  viewProductHandler(event) {\n    event.stopPropagation();\n    if (!this.product) return;\n    this.productViewed.emit(this.product);\n    // Logic for opening a quick view modal, for example\n  }\n\n  buyNowHandler(event) {\n    event.stopPropagation();\n    if (!this.product || (this.product.stockQuantity || 0) === 0) return;\n    const cartItem = {\n      productId: this.product.id,\n      quantity: this.selectedQuantity,\n      name: this.product.name,\n      price: this.product.discountPrice || this.product.price,\n      unitPrice: this.product.discountPrice || this.product.price,\n      image: this.product.imageUrl || this.product.images && this.product.images[0]?.url || ''\n    };\n    this.store.dispatch(CartActions.addToCart({\n      item: cartItem\n    }));\n    this.productBoughtNow.emit({\n      product: this.product,\n      quantity: this.selectedQuantity\n    });\n    // Typically, you'd navigate to checkout here or dispatch another action\n    // If 'navigateToCheckout' is not a standard action, you might need to implement custom navigation\n    // or a specific NGRX effect that handles this. For now, commenting out if it causes issues.\n    // this.store.dispatch(CartActions.navigateToCheckout()); \n    console.log('Buy Now: Navigating to checkout (placeholder)');\n    this.cdr.markForCheck();\n  }\n  toggleQuantitySelectorHandler(event) {\n    event.stopPropagation();\n    if ((this.product?.stockQuantity || 0) === 0) return;\n    this.uiShowQuantitySelector = !this.uiShowQuantitySelector;\n  }\n  onQuantityChange() {\n    if (this.selectedQuantity < 1) {\n      this.selectedQuantity = 1;\n    }\n    if (this.product?.stockQuantity && this.selectedQuantity > this.product.stockQuantity) {\n      this.selectedQuantity = this.product.stockQuantity;\n    }\n  }\n  incrementQuantity(event) {\n    event.stopPropagation();\n    if (this.product?.stockQuantity && this.selectedQuantity < this.product.stockQuantity) {\n      this.selectedQuantity++;\n    }\n  }\n  decrementQuantity(event) {\n    event.stopPropagation();\n    if (this.selectedQuantity > 1) {\n      this.selectedQuantity--;\n    }\n  }\n  get currentDisplayImage() {\n    if (this.product?.images && this.product.images.length > 0 && this.product.images[this.currentImageIndex]?.url) {\n      return this.product.images[this.currentImageIndex].url;\n    }\n    return this.product?.imageUrl || 'assets/images/placeholder.png';\n  }\n  get stockStatusClass() {\n    if ((this.product?.stockQuantity || 0) === 0) return 'out-of-stock';\n    if ((this.product?.stockQuantity || 0) <= 10 && (this.product?.stockQuantity || 0) > 0) return 'low-stock'; // Fixed condition\n    return 'in-stock';\n  }\n  get cardClasses() {\n    const classes = ['product-card'];\n    if (this.product?.featured) {\n      classes.push('product-card--featured');\n    }\n    if (this.isNew) {\n      classes.push('product-card--new');\n    }\n    if (this.isBestSeller) {\n      classes.push('product-card--bestseller');\n    }\n    if ((this.product?.stockQuantity || 0) === 0) {\n      classes.push('product-card--out-of-stock');\n    }\n    return classes;\n  }\n};\n__decorate([Input()], ProductCardComponent.prototype, \"product\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"currencySymbol\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"newThresholdDays\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"showNewBadge\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"showFeaturedBadge\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"showBestsellerBadge\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"showSoldOutBadge\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"showImageHoverControls\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"showImageIndicators\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"showStockIndicator\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"showRating\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"showShortDescription\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"showKeyFeatures\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"showShippingInfo\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"cycleImagesOnHover\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"size\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"showBuyNowButton\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"showQuantityControl\", void 0);\n__decorate([Input()], ProductCardComponent.prototype, \"layout\", void 0);\n__decorate([Output()], ProductCardComponent.prototype, \"productAddedToCart\", void 0);\n__decorate([Output()], ProductCardComponent.prototype, \"productAddedToWishlist\", void 0);\n__decorate([Output()], ProductCardComponent.prototype, \"productCompared\", void 0);\n__decorate([Output()], ProductCardComponent.prototype, \"productViewed\", void 0);\n__decorate([Output()], ProductCardComponent.prototype, \"productBoughtNow\", void 0);\nProductCardComponent = __decorate([Component({\n  selector: 'app-product-card',\n  templateUrl: './product-card.component.html',\n  styleUrls: ['./product-card.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})], ProductCardComponent);\nexport { ProductCardComponent };","map":{"version":3,"names":["Component","Input","Output","EventEmitter","ChangeDetectionStrategy","CartActions","of","ProductCardComponent","constructor","store","wishlistService","cdr","currencySymbol","newThresholdDays","showNewBadge","showFeaturedBadge","showBestsellerBadge","showSoldOutBadge","showImageHoverControls","showImageIndicators","showStockIndicator","showRating","showShortDescription","showKeyFeatures","showShippingInfo","cycleImagesOnHover","size","showBuyNowButton","showQuantityControl","layout","productAddedToCart","productAddedToWishlist","productCompared","productViewed","productBoughtNow","isNew","isBestSeller","isLowStock","discountPercentage","discountAmount","currentImageIndex","addingToCart","addingToWishlistState","uiShowQuantitySelector","selectedQuantity","isInWishlist$","isInCompare$","ngOnInit","updateProductFlags","calculateDiscount","product","id","isInWishlist","ngOnChanges","changes","markForCheck","now","Date","productDate","createdAt","diffTime","Math","abs","getTime","diffDays","ceil","featured","rating","reviews","length","stockQuantity","regularPrice","price","round","onMouseEnter","startImageCycle","onMouseLeave","stopImageCycle","images","imageChangeInterval","setInterval","clearInterval","prevImage","event","stopPropagation","nextImage","setImage","index","onImageError","imgElement","target","src","addToCartHandler","cartItem","productId","quantity","name","discountPrice","unitPrice","image","imageUrl","url","setTimeout","dispatch","addToCart","item","emit","addToWishlistHandler","toggleWishlist","subscribe","compareProductHandler","viewProductHandler","buyNowHandler","console","log","toggleQuantitySelectorHandler","onQuantityChange","incrementQuantity","decrementQuantity","currentDisplayImage","stockStatusClass","cardClasses","classes","push","__decorate","selector","templateUrl","styleUrls","changeDetection","OnPush"],"sources":["/Users/stephanelkhoury/Documents/GitHub/Angular-masterclass/Ecommerce-Project/code-examples/angular-ecommerce/src/app/shared/components/product-card/product-card.component.ts"],"sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter, ChangeDetectionStrategy, ChangeDetectorRef, OnChanges, SimpleChanges } from '@angular/core';\nimport { Product, ProductImage } from '../../../core/models/product.model'; // Added ProductImage\nimport { Store } from '@ngrx/store'; // Import Store\nimport { AppState } from '../../../store'; // Assuming AppState is defined\nimport * as CartActions from '../../../store/actions/cart.actions'; // Import CartActions\nimport { Observable, of } from 'rxjs'; // Import Observable and of for isInWishlist$\nimport { WishlistService } from '../../../core/services/wishlist.service'; // Assuming you have a WishlistService\nimport { map } from 'rxjs/operators';\nimport { CartItem } from '../../../core/models/cart-item.model'; // Import CartItem\n\n\n@Component({\n  selector: 'app-product-card',\n  templateUrl: './product-card.component.html',\n  styleUrls: ['./product-card.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ProductCardComponent implements OnInit, OnChanges {\n  @Input() product!: Product;\n  @Input() currencySymbol: string = '$';\n  @Input() newThresholdDays: number = 7; // Days to consider a product \"new\"\n  \n  // Configuration for what to show\n  @Input() showNewBadge: boolean = true;\n  @Input() showFeaturedBadge: boolean = true;\n  @Input() showBestsellerBadge: boolean = true;\n  @Input() showSoldOutBadge: boolean = true;\n  @Input() showImageHoverControls: boolean = true;\n  @Input() showImageIndicators: boolean = true;\n  @Input() showStockIndicator: boolean = true;\n  @Input() showRating: boolean = true;\n  @Input() showShortDescription: boolean = false;\n  @Input() showKeyFeatures: boolean = false;\n  @Input() showShippingInfo: boolean = false;\n  @Input() cycleImagesOnHover: boolean = true;\n\n  // New Inputs for layout and specific button visibility\n  @Input() size: 'small' | 'medium' | 'large' = 'medium';\n  @Input() showBuyNowButton: boolean = true;\n  @Input() showQuantityControl: boolean = true; // For controlling the +/- quantity input\n  @Input() layout: 'vertical' | 'horizontal' = 'vertical';\n\n\n  // Event Emitters - Renamed to avoid conflict with method names\n  @Output() productAddedToCart = new EventEmitter<{product: Product, quantity: number}>();\n  @Output() productAddedToWishlist = new EventEmitter<Product>();\n  @Output() productCompared = new EventEmitter<Product>();\n  @Output() productViewed = new EventEmitter<Product>(); // For quick view\n  @Output() productBoughtNow = new EventEmitter<{product: Product, quantity: number}>();\n\n\n  isNew = false;\n  isBestSeller = false;\n  isLowStock = false;\n  discountPercentage: number | null = null;\n  discountAmount: number | null = null;\n\n  currentImageIndex = 0;\n  private imageChangeInterval: any;\n\n  addingToCart = false;\n  addingToWishlistState = false; // Renamed to avoid conflict\n  uiShowQuantitySelector = false; // Renamed to avoid conflict\n  selectedQuantity: number = 1;\n\n  isInWishlist$: Observable<boolean> = of(false); // Default to false\n  isInCompare$: Observable<boolean> = of(false); // Placeholder for compare feature\n\n\n  constructor(\n    private store: Store<AppState>, // Inject Store\n    private wishlistService: WishlistService, // Inject WishlistService\n    private cdr: ChangeDetectorRef\n  ) {}\n\n  ngOnInit(): void {\n    this.updateProductFlags();\n    this.calculateDiscount();\n    if (this.product && this.product.id) { // Ensure product and product.id exist\n        this.isInWishlist$ = this.wishlistService.isInWishlist(this.product.id);\n        // this.isInCompare$ = this.compareService.isInCompare(this.product.id); // If you have a compare service\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['product'] && this.product && this.product.id) { // Ensure product and product.id exist\n      this.updateProductFlags();\n      this.calculateDiscount();\n      this.selectedQuantity = 1; // Reset quantity when product changes\n      this.uiShowQuantitySelector = false;\n      this.isInWishlist$ = this.wishlistService.isInWishlist(this.product.id);\n      // this.isInCompare$ = this.compareService.isInCompare(this.product.id);\n      this.cdr.markForCheck();\n    }\n  }\n\n  private updateProductFlags(): void {\n    if (!this.product) return;\n\n    const now = new Date();\n    const productDate = this.product.createdAt ? new Date(this.product.createdAt) : now;\n    const diffTime = Math.abs(now.getTime() - productDate.getTime());\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    this.isNew = diffDays <= (this.newThresholdDays || 7);\n\n    this.isBestSeller = !!this.product.featured ||\n                       ( (this.product.rating || 0) >= 4.5 && (this.product.reviews?.length || 0) >= 50); // Adjusted review count\n    \n    this.isLowStock = (this.product.stockQuantity || 0) > 0 && (this.product.stockQuantity || 0) <= 10;\n  }\n\n  private calculateDiscount(): void {\n    if (!this.product) {\n      this.discountPercentage = null;\n      this.discountAmount = null;\n      return;\n    }\n    if (this.product.regularPrice && this.product.regularPrice > this.product.price) {\n      this.discountPercentage = Math.round(\n        ((this.product.regularPrice - this.product.price) / this.product.regularPrice) * 100\n      );\n      this.discountAmount = this.product.regularPrice - this.product.price;\n    } else {\n      this.discountPercentage = null;\n      this.discountAmount = null;\n    }\n  }\n\n  // Mouse enter/leave handlers for image cycling\n  onMouseEnter(): void {\n    if (this.cycleImagesOnHover) {\n      this.startImageCycle();\n    }\n  }\n\n  onMouseLeave(): void {\n    if (this.cycleImagesOnHover) {\n      this.stopImageCycle();\n    }\n  }\n  \n  startImageCycle(): void {\n    if (this.cycleImagesOnHover && this.product?.images && this.product.images.length > 1) {\n      this.stopImageCycle(); // Clear existing interval\n      this.imageChangeInterval = setInterval(() => {\n        if (this.product.images && this.product.images.length > 1) {\n          this.currentImageIndex = (this.currentImageIndex + 1) % this.product.images.length;\n          this.cdr.markForCheck(); // Trigger change detection\n        }\n      }, 2000); // Change image every 2 seconds\n    }\n  }\n\n  stopImageCycle(): void {\n    if (this.imageChangeInterval) {\n      clearInterval(this.imageChangeInterval);\n      this.imageChangeInterval = null;\n    }\n  }\n  \n  // Image navigation\n  prevImage(event: MouseEvent): void {\n    event.stopPropagation();\n    if (this.product?.images && this.product.images.length > 0) {\n      this.currentImageIndex = (this.currentImageIndex - 1 + this.product.images.length) % this.product.images.length;\n    }\n  }\n\n  nextImage(event: MouseEvent): void {\n    event.stopPropagation();\n    if (this.product?.images && this.product.images.length > 0) {\n      this.currentImageIndex = (this.currentImageIndex + 1) % this.product.images.length;\n    }\n  }\n  \n  setImage(index: number, event: MouseEvent): void {\n    event.stopPropagation();\n    this.currentImageIndex = index;\n  }\n\n  onImageError(event: Event): void {\n    const imgElement = event.target as HTMLImageElement;\n    imgElement.src = 'assets/images/placeholder.png'; // Fallback image\n  }\n\n\n  // Action Methods\n  addToCartHandler(event: MouseEvent): void {\n    event.stopPropagation();\n    if (!this.product || (this.product.stockQuantity || 0) === 0 || this.addingToCart) return;\n\n        this.addingToCart = true;\n    const cartItem: CartItem = {\n      productId: this.product.id,\n      quantity: this.selectedQuantity,\n      name: this.product.name,\n      price: this.product.discountPrice || this.product.price,\n      unitPrice: this.product.discountPrice || this.product.price,\n      image: this.product.imageUrl || (this.product.images && this.product.images[0]?.url) || ''\n    };\n    // Simulate API call\n    setTimeout(() => {\n      this.store.dispatch(CartActions.addToCart({ item: cartItem }));\n      this.productAddedToCart.emit({product: this.product, quantity: this.selectedQuantity});\n      this.addingToCart = false;\n      this.uiShowQuantitySelector = false; // Hide quantity selector after adding\n      this.selectedQuantity = 1; // Reset quantity\n      this.cdr.markForCheck();\n    }, 500);\n  }\n\n  addToWishlistHandler(event: MouseEvent): void { // Renamed method\n    event.stopPropagation();\n    if (!this.product || this.addingToWishlistState) return;\n\n    this.addingToWishlistState = true;\n    // Assuming WishlistService has a method like toggleWishlistItem or add/remove\n    // For now, let's assume toggleWishlist exists and works as intended.\n    // If toggleWishlist is not the correct method, this needs to be adjusted based on WishlistService's API.\n    this.wishlistService.toggleWishlist(this.product.id).subscribe(() => {\n        this.productAddedToWishlist.emit(this.product);\n        this.addingToWishlistState = false;\n        if (this.product && this.product.id) { // Re-check after ensuring product.id exists\n             this.isInWishlist$ = this.wishlistService.isInWishlist(this.product.id);\n        }\n        this.cdr.markForCheck();\n    });\n  }\n  \n  compareProductHandler(event: MouseEvent): void {\n    event.stopPropagation();\n    if (!this.product) return;\n    this.productCompared.emit(this.product);\n    // Add logic for compare service if available\n    // this.isInCompare$ = this.compareService.toggleCompare(this.product.id);\n    this.cdr.markForCheck();\n  }\n\n  viewProductHandler(event: MouseEvent): void {\n    event.stopPropagation();\n    if (!this.product) return;\n    this.productViewed.emit(this.product);\n    // Logic for opening a quick view modal, for example\n  }\n\n\n  buyNowHandler(event: MouseEvent): void {\n    event.stopPropagation();\n    if (!this.product || (this.product.stockQuantity || 0) === 0) return;\n    \n        const cartItem: CartItem = {\n      productId: this.product.id,\n      quantity: this.selectedQuantity,\n      name: this.product.name,\n      price: this.product.discountPrice || this.product.price,\n      unitPrice: this.product.discountPrice || this.product.price,\n      image: this.product.imageUrl || (this.product.images && this.product.images[0]?.url) || ''\n    };\n    this.store.dispatch(CartActions.addToCart({ item: cartItem }));\n    this.productBoughtNow.emit({product: this.product, quantity: this.selectedQuantity});\n    // Typically, you'd navigate to checkout here or dispatch another action\n    // If 'navigateToCheckout' is not a standard action, you might need to implement custom navigation\n    // or a specific NGRX effect that handles this. For now, commenting out if it causes issues.\n    // this.store.dispatch(CartActions.navigateToCheckout()); \n    console.log('Buy Now: Navigating to checkout (placeholder)');\n    this.cdr.markForCheck();\n  }\n\n  toggleQuantitySelectorHandler(event: MouseEvent): void { // Renamed method\n    event.stopPropagation();\n    if ((this.product?.stockQuantity || 0) === 0) return;\n    this.uiShowQuantitySelector = !this.uiShowQuantitySelector;\n  }\n\n  onQuantityChange(): void {\n    if (this.selectedQuantity < 1) {\n      this.selectedQuantity = 1;\n    }\n    if (this.product?.stockQuantity && this.selectedQuantity > this.product.stockQuantity) {\n      this.selectedQuantity = this.product.stockQuantity;\n    }\n  }\n\n  incrementQuantity(event: MouseEvent): void {\n    event.stopPropagation();\n    if (this.product?.stockQuantity && this.selectedQuantity < this.product.stockQuantity) {\n      this.selectedQuantity++;\n    }\n  }\n\n  decrementQuantity(event: MouseEvent): void {\n    event.stopPropagation();\n    if (this.selectedQuantity > 1) {\n      this.selectedQuantity--;\n    }\n  }\n\n  get currentDisplayImage(): string {\n    if (this.product?.images && this.product.images.length > 0 && this.product.images[this.currentImageIndex]?.url) {\n      return this.product.images[this.currentImageIndex].url;\n    }\n    return this.product?.imageUrl || 'assets/images/placeholder.png';\n  }\n\n  get stockStatusClass(): string {\n    if ((this.product?.stockQuantity || 0) === 0) return 'out-of-stock';\n    if ((this.product?.stockQuantity || 0) <= 10 && (this.product?.stockQuantity || 0) > 0) return 'low-stock'; // Fixed condition\n    return 'in-stock';\n  }\n\n  get cardClasses(): string[] {\n    const classes = ['product-card'];\n    if (this.product?.featured) {\n      classes.push('product-card--featured');\n    }\n    if (this.isNew) {\n      classes.push('product-card--new');\n    }\n    if (this.isBestSeller) {\n      classes.push('product-card--bestseller');\n    }\n    if ((this.product?.stockQuantity || 0) === 0) {\n      classes.push('product-card--out-of-stock');\n    }\n    return classes;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}