<mat-card class="product-card" [class.out-of-stock]="product.stockQuantity === 0">
  <div class="product-badge" *ngIf="discountPercentage > 0">
    -{{discountPercentage}}%
  </div>
  <div class="product-badge sold-out" *ngIf="product.stockQuantity === 0">
    Sold Out
  </div>
  
  <div class="product-image-container" (click)="onViewDetails()">
    <img mat-card-image [src]="product.imageUrl" [alt]="product.name" class="product-image" appLazyImg>
  </div>
  
  <mat-card-content>
    <div class="product-category">{{product.category.name}}</div>
    <h3 class="product-name" [appHighlight]="product.featured" (click)="onViewDetails()">{{product.name}}</h3>
    <app-star-rating [rating]="product.rating" [reviewCount]="product.reviews?.length || 0"></app-star-rating>
    
    <div class="product-price">
      <span class="current-price">{{product.price | price}}</span>
      <span class="regular-price" *ngIf="product.regularPrice && product.regularPrice > product.price">
        {{product.regularPrice | price}}
      </span>
    </div>
    
    <p class="product-description" *ngIf="product.description">
      {{product.description | truncate:80}}
    </p>
  </mat-card-content>
  
  <mat-card-actions *ngIf="showActions">
    <button 
      mat-raised-button 
      color="primary" 
      (click)="onAddToCart()"
      [disabled]="product.stockQuantity === 0">
      <mat-icon>shopping_cart</mat-icon>
      Add to Cart
    </button>
    
    <button mat-icon-button (click)="onAddToWishlist()">
      <mat-icon>favorite_border</mat-icon>
    </button>
  </mat-card-actions>
</mat-card>
