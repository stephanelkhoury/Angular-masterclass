<div class="home-container">
  <!-- Loading Spinner -->
  <app-loading-spinner *ngIf="loading$ | async" [overlay]="true"></app-loading-spinner>

  <!-- Hero Banner -->
  <app-hero-banner (search)="searchProducts($event)"></app-hero-banner>

  <!-- Featured Products Section -->
  <section class="section products-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Featured Products</h2>
        <a routerLink="/products" class="view-all-link">View All <mat-icon>chevron_right</mat-icon></a>
      </div>
      
      <div class="products-grid">
        <ng-container *ngIf="(featuredProducts$ | async) as featuredProducts">
          <div *ngFor="let product of featuredProducts" class="product-card-wrapper">
            <app-product-card 
              [product]="product"
              (addToCart)="addToCart($event)"
              (addToWishlist)="addToWishlist($event)"
              (viewDetails)="viewProductDetails($event)">
            </app-product-card>
          </div>
          
          <div *ngIf="featuredProducts.length === 0" class="no-products-message">
            <p>No featured products available at the moment.</p>
          </div>
        </ng-container>
      </div>
    </div>
  </section>

  <!-- Promo Banner -->
  <app-promo-banner></app-promo-banner>

  <!-- Popular Categories -->
  <section class="section categories-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Shop by Category</h2>
      </div>
      
      <div class="categories-grid">
        <ng-container *ngIf="(popularCategories$ | async) as categories">
          <app-category-card 
            *ngFor="let category of categories" 
            [category]="category"
            (click)="viewCategory(category)">
          </app-category-card>
          
          <div *ngIf="categories.length === 0" class="no-categories-message">
            <p>No categories available.</p>
          </div>
        </ng-container>
      </div>
    </div>
  </section>

  <!-- New Arrivals Section -->
  <section class="section products-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">New Arrivals</h2>
        <a routerLink="/products" [queryParams]="{sort: 'newest'}" class="view-all-link">View All <mat-icon>chevron_right</mat-icon></a>
      </div>
      
      <div class="products-grid">
        <ng-container *ngIf="(newArrivals$ | async) as newArrivals">
          <div *ngFor="let product of newArrivals" class="product-card-wrapper">
            <app-product-card 
              [product]="product"
              (addToCart)="addToCart($event)"
              (addToWishlist)="addToWishlist($event)"
              (viewDetails)="viewProductDetails($event)">
            </app-product-card>
          </div>
          
          <div *ngIf="newArrivals.length === 0" class="no-products-message">
            <p>No new products available at the moment.</p>
          </div>
        </ng-container>
      </div>
    </div>
  </section>

  <!-- Testimonials -->
  <app-testimonial-slider></app-testimonial-slider>

  <!-- Newsletter Signup -->
  <app-newsletter-signup></app-newsletter-signup>
</div>
